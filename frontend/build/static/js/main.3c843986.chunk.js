(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{141:function(e,t,a){},240:function(e,t,a){},306:function(e,t,a){e.exports=a(582)},331:function(e,t,a){},350:function(e,t,a){},351:function(e,t,a){},493:function(e,t){},499:function(e,t,a){},510:function(e,t,a){},511:function(e,t,a){},581:function(e,t,a){},582:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),i=a.n(o),s=(a(141),a(301)),c=a(52),l=(a(73),a(38)),u=a(39),p=a(41),d=a(40),m=a(35),f=a(12),h=a(9),g=a.n(h),b=a(15),v="GET_SOME_DATA",E=a(23),y=a.n(E),O=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.get("/some-api-route");case 2:t.sent,a({type:v,payload:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=a(612),j=a(613),w=a(584),C=a(592),x=a(590),D=a(599),T=a(596),S=a(601),A=a(586),R=a(70),I=(a(331),"CHANGE_FILTERS"),P="GET_LEFT_DETAILS",N=function(){return function(){var e=Object(b.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/users/left-details");case 3:a=e.sent,console.log(a.data),t({type:P,payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"GET_ERRORS",payload:e.t0.response.data});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:I,selectedfilters:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=a(595),M=a(598),G=a(604),H=a(43),U="SET_CURRENT_ROUTE",z=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:U,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F=w.a.Sider,q=_.a.SubMenu,W=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.getLeftDetails()}},{key:"render",value:function(){var e=this,t=this.props.profileDetails,a=t.following,n=t.followers,o=t.achievements,i=t.donations,s=t.name,c=t.avatar;console.log("donations ",i);var l=n.length?n.map((function(t){return r.a.createElement(H.b,{onClick:function(){return e.props.setCurrentRoute("profile")},to:"/profile/".concat(t._id)},r.a.createElement(_.a.Item,{key:t._id,style:{paddingLeft:"36px",marginBottom:"10px"}},r.a.createElement(T.a,{size:25,src:t.avatar,style:{backgroundColor:"#87d068",marginRight:"4px"}}),t.name))})):r.a.createElement(_.a.Item,{key:"1"}," No followers yet! "),u=a.length?a.map((function(t){return r.a.createElement(H.b,{onClick:function(){return e.props.setCurrentRoute("profile")},to:"/profile/".concat(t._id)},r.a.createElement(_.a.Item,{key:t._id,style:{paddingLeft:"36px",marginBottom:"10px"}},r.a.createElement(T.a,{size:25,src:t.avatar,style:{backgroundColor:"#87d068",marginRight:"4px"}}),t.name))})):r.a.createElement(_.a.Item,{key:"1"}," You are not following anyone! "),p=(null===i||void 0===i?void 0:i.length)?i.map((function(e){return console.log("inside the donation list",e),r.a.createElement(_.a.Item,{key:e._id},e.title)})):r.a.createElement(_.a.Item,{key:"1"}," No donations yet! ");(null===o||void 0===o?void 0:o.length)?o.map((function(e){return r.a.createElement(_.a.Item,{key:e.id},e.title)})):_.a.Item;return r.a.createElement(F,{width:280,className:"site-layout-background",style:{overflow:"auto",height:"100vh",position:"fixed",left:0,marginTop:"40px"}},r.a.createElement(_.a,{mode:"inline",defaultOpenKeys:["sub5"],style:{height:"100%",borderRight:0,paddingTop:"40px"}},r.a.createElement(_.a.Item,{key:"Sub1",style:{fontSize:"16px",marginBlock:"10px"}},r.a.createElement(H.b,{to:"/profile/".concat(this.props.profileDetails._id)}),r.a.createElement(S.b,null,r.a.createElement(T.a,{size:36,src:c,style:{backgroundColor:"#87d068"},icon:r.a.createElement(G.a,null)}),s)),r.a.createElement(q,{key:"sub2",title:"Followers",style:{fontSize:"16px"}},l),r.a.createElement(q,{key:"sub3",title:"Following",style:{fontSize:"16px"}},u),r.a.createElement(q,{key:"sub4",title:"Recent Donations",style:{fontSize:"16px"}},p),r.a.createElement(q,{key:"sub6",title:"Filters",style:{fontSize:"16px"}},r.a.createElement("div",{style:{padding:"auto"}},r.a.createElement(M.a.Group,{options:[{label:"Donations",value:"Donations"},{label:"Events",value:"Events"},{label:"Posts",value:"Posts"}],onChange:function(t){e.props.changeFilters(t)}})))))}}]),a}(n.Component),B=Object(m.b)((function(e){return{profileDetails:e.LeftSidePanelReducer.profileDetails}}),(function(e){return{changeFilters:Object(f.bindActionCreators)(L,e),getLeftDetails:Object(f.bindActionCreators)(N,e),setCurrentRoute:Object(f.bindActionCreators)(z,e)}}))(W),V=(a(350),a(594)),Y=a(606),X=a(607),K=a(608),J=a(609),Q=a(610),$=a(611),Z=a(591),ee=a(593),te=a(589),ae=a(605),ne=(a(351),function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.post("/api/posts/create",{post:e});case 2:n=t.sent,console.log(n.data),a({type:"ADD_POST",post:n.data.post,comment:n.data.comment});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),re=a(48),oe=a.n(re),ie="GET_SOME_DATA",se="GET_SUGGESTED_PAGES",ce="CHANGE_TAB",le="GET_PROFILE",ue="UPDATE_PROFILE_PIC",pe="GET_FOLLOWERS",de="GET_FOLLOWING",me=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.post("../../api/donation/accept",{_id:e._id});case 2:console.log("inside the reducer"),a({type:"ACCEPT_DONATION",payload:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fe=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.get("/some-api-route");case 2:t.sent,a({type:ie,payload:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},he=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("add history",e),t.next=3,y.a.post("/api/users/addhistory",{history:e});case 3:n=t.sent,a({type:"ADD_HISTORY",payload:n.data});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ge=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("/api/users/profile/".concat(e));case 3:n=t.sent,console.log(n.data),a({type:le,payload:n.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},be=function(){return function(){var e=Object(b.a)(g.a.mark((function e(t,a){var n,r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a().authReducer.user.userId,r=function(e){return 0==e.status.localeCompare("pending")&&e.receiverId==n},o=a().DiscoverReducer.Donations.filter(r),t({type:"GET_PENDING_DONATION",payload:o});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},ve=function(e){return function(t){t({type:ce,payload:e})}},Ee=function(e,t){return function(a){a({type:ue,payload:{profilePic:e,avatar:t}})}},ye=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("/api/users/follow/".concat(e));case 3:n=t.sent,a({type:le,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Oe=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("/api/users/unfollow/".concat(e));case 3:n=t.sent,a({type:le,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},ke=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("/api/users/followers/".concat(e));case 3:n=t.sent,a({type:pe,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},je=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("/api/users/following/".concat(e));case 3:n=t.sent,a({type:de,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},we=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.post("api/donation/reject",{_id:e});case 3:n=t.sent,console.log(n.data),a({type:"REJECT_DONATION",id:e}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Ce=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.post("/api/users/edit-profile",{user:e});case 3:n=t.sent,a({type:le,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},xe=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},De=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:e.props.name,description:"",files:[]},e.addpost=function(t){e.props.handleOk();var a=t.dragger,n=null===a||void 0===a?void 0:a.map((function(e){return e.response.location})),r={author:e.state.user,description:t.description,likes:[],liked:!1,noOfLikes:0,DateTime:oe()().format("HH:mm ll"),imageUrl:n};e.props.addPost(r);var o={color:"blue",icon:"dot",text:r.description+" ( Posted on "+r.DateTime+" )"};e.props.addHistory(o)},e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(C.a,{visible:this.props.visible,maskClosable:!1,destroyOnClose:!0,title:"Share your Thoughts",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(R.a,{key:"back",onClick:this.props.handleCancel},"Return"),r.a.createElement(R.a,{form:"post-form",key:"submit",type:"primary",htmlType:"submit",loading:this.props.loading},"Post")]},r.a.createElement(Z.a,{id:"post-form",name:"validate_other",layout:"Vertical",onFinish:this.addpost},r.a.createElement(Z.a.Item,{name:"description",width:500,rules:[{required:!0,message:"Please Enter Items details"}]},r.a.createElement(ee.a.TextArea,{placeholder:"Express your thoughts",autoSize:{minRows:2,maxRows:6}})),r.a.createElement(Z.a.Item,{name:"dragger",valuePropName:"fileList",getValueFromEvent:xe,noStyle:!0},r.a.createElement(te.a.Dragger,{multiple:!1,name:"file",customRequest:function(){var e=Object(b.a)(g.a.mark((function e(t){var a,n,r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.file,n=t.onSuccess,r=t.onError,(o=new FormData).append("file",a),e.next=5,y.a.post("/upload/posts",o).then((function(e){n(e.data),console.log(e.data)})).catch((function(e){console.log("error in uploading"),r("Error in uploading.Try again")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(ae.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),r.a.createElement("p",{className:"ant-upload-hint"},"Support for a single or bulk upload.")))))}}]),a}(n.Component),Te=Object(m.b)((function(e){return{name:e.LeftSidePanelReducer.profileDetails.name}}),(function(e){return{addHistory:Object(f.bindActionCreators)(he,e),addPost:Object(f.bindActionCreators)(ne,e)}}))(De),Se=a(585),Ae=function(e,t){return function(){var a=Object(b.a)(g.a.mark((function a(n){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e,a.next=3,y.a.post("/api/comment/add/".concat(e),{content:t.content});case 3:n({type:"ADD_COMMENT",id:e,comment:t});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Re=ee.a.TextArea,Ie=function(e){var t=e.comments;return r.a.createElement(x.b,{dataSource:t,header:"".concat(t.length," ").concat(t.length>1?"replies":"reply"),itemLayout:"horizontal",renderItem:function(e){return r.a.createElement(Se.a,e)}})},Pe=function(e){var t=e.onChange,a=e.onSubmit,n=e.submitting,o=e.value;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a.Item,null,r.a.createElement(Re,{rows:2,onChange:t,value:o})),r.a.createElement(Z.a.Item,null,r.a.createElement(R.a,{htmlType:"submit",loading:n,onClick:a,type:"primary"},"Add Comment")))},Ne=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={submitting:!1,value:""},e.handleSubmit=function(t){if(e.state.value){console.log("inside comments",e.props.postComments,e.props.id);var a=e.state.value;console.log(a),e.setState({submitting:!0}),setTimeout((function(){var t={author:"Arpit Bandjiya",avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:a,datetime:oe()().fromNow()};e.props.addComment(e.props.id,t)}),1e3),e.setState({submitting:!1,value:""})}},e.handleChange=function(t){console.log(t.target.value),e.setState({value:t.target.value})},e}return Object(u.a)(a,[{key:"render",value:function(){if(this.props.id){var e=this.state,t=e.submitting,a=e.value,n=this.props.postComments[0].comments;return console.log(this.props.id,this.props.postComments,n),r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{visible:this.props.visible,title:"Comments",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(R.a,{key:"back",onClick:this.props.handleCancel},"Return"),r.a.createElement(R.a,{key:"submit",type:"primary",loading:this.props.loading,onClick:this.props.handleOk},"DOne")]},n.length>0&&r.a.createElement(Ie,{comments:n}),r.a.createElement(Se.a,{avatar:r.a.createElement(T.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",alt:"Han Solo"}),content:r.a.createElement(Pe,{onChange:this.handleChange,onSubmit:this.handleSubmit,submitting:t,value:a})})))}return null}}]),a}(r.a.Component),Le=Object(m.b)((function(e,t){var a=t.id,n=e.HomeCenterReducer.postComments;return console.log("inside the commments"),console.log(a),console.log(n),{postComments:n.filter((function(e){return e.postId===a}))}}),(function(e){return{addComment:Object(f.bindActionCreators)(Ae,e)}}))(Ne),_e=function(){return function(){var e=Object(b.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/api/posts/");case 2:a=e.sent,console.log("check it out"),console.log(a.data),t({type:"GET_POST",payload:a.data.posts,allcomments:a.data.allcomments,avatars:a.data.avatars});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Me=function(e,t){return function(){var a=Object(b.a)(g.a.mark((function a(n){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=5;break}return a.next=3,y.a.post("/api/posts/like",{id:e,value:-1});case 3:a.next=7;break;case 5:return a.next=7,y.a.post("/api/posts/like",{id:e,value:1});case 7:n({type:"CHANGE_LIKE",id:e,value:t});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Ge=w.a.Content,He=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,visible:!1,loadingComments:!1,visibleComments:!1,currentPostid:null},e.showModal=function(){e.setState({visible:!0})},e.startModalComments=function(){var t=Object(b.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({currentPostid:a});case 2:e.setState({visibleComments:!0}),console.log("inside start modal comment ".id);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showModalComments=function(){e.setState({visibleComments:!0})},e.handleOk=function(){e.setState({loading:!0}),setTimeout((function(){e.setState({loading:!1,visible:!1})}),500),C.a.success({content:"Post Shared"})},e.handleOkComments=function(){e.setState({loadingComments:!0}),setTimeout((function(){e.setState({loadingComments:!1,visibleComments:!1})}),100)},e.handleCancel=function(){e.setState({visible:!1})},e.handleCancelComments=function(){e.setState({visibleComments:!1})},e.incrementLike=function(t,a){e.props.changelike(t,a)},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){console.log("mount called in home center"),this.props.getPost()}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.loading,o=t.visibleComments,i=t.loadingComments,s=this.props.posts,c=s.length?s.map((function(t){return r.a.createElement(D.a,{title:r.a.createElement(H.b,{onClick:function(){return e.props.setCurrentRoute("profile")},to:"/profile/".concat(t.authorId._id)},r.a.createElement(T.a,{src:t.authorId.avatar,alt:"Han Solo",style:{margin:"8px"}}),t.author),extra:t.DateTime,style:{width:700,margin:"8px"},actions:[r.a.createElement("div",{onClick:function(a){return e.incrementLike(t._id,t.liked)}},(n=t.liked,n?r.a.createElement(Y.a,{key:"Like",style:{margin:"8px"}}):r.a.createElement(X.a,{key:"Like",style:{margin:"8px"}})),t.noOfLikes),r.a.createElement("div",null,r.a.createElement(K.a,{key:"share",style:{margin:"8px"}})," "),r.a.createElement("div",null,r.a.createElement(J.a,{hoverable:!0,onClick:function(){return e.startModalComments(t._id)},key:"Comment",style:{margin:"8px"}})," "),r.a.createElement("div",null,r.a.createElement(Q.a,{key:"Award",style:{margin:"8px"}})," ")]},r.a.createElement("p",null,t.description),r.a.createElement(S.b,null,void 0==(a=t.imageUrl)?r.a.createElement("div",null,"No images!"):a.length?a.map((function(e){return r.a.createElement(V.a,{width:100,height:100,alt:"example",src:e})})):r.a.createElement("div",null,"No images!")));var a,n})):r.a.createElement("div",null," No post are here! ");return r.a.createElement(Ge,{style:{margin:"auto"}},r.a.createElement(D.a,{style:{width:700,margin:"8px"},hoverable:!0,onClick:this.showModal},r.a.createElement("p",{className:"cardtext"}," ",r.a.createElement($.a,null)," Share something with the community")),r.a.createElement(Te,{handleCancel:this.handleCancel,handleOk:this.handleOk,showModal:this.showModal,visible:a,loading:n}),r.a.createElement(Le,{id:this.state.currentPostid,handleCancel:this.handleCancelComments,handleOk:this.handleOkComments,showModal:this.showModalComments,visible:o,loading:i}),c)}}]),a}(n.Component),Ue=Object(m.b)((function(e){return{posts:e.HomeCenterReducer.posts}}),(function(e){return{changelike:Object(f.bindActionCreators)(Me,e),getPost:Object(f.bindActionCreators)(_e,e),setCurrentRoute:Object(f.bindActionCreators)(z,e)}}))(He),ze=w.a.Sider;function Fe(){C.a.info({title:"Coming soon",onOk:function(){}})}function qe(){C.a.info({title:"Food4all",content:r.a.createElement("div",null,r.a.createElement("p",null,"A new community-led platform to highlight local food security programs and connect donors to them, making the process convenient.")),onOk:function(){}})}function We(){C.a.info({title:"Please refer to Documentation",onOk:function(){}})}function Be(){C.a.info({title:"Reach out to us at any of the below email address :",content:r.a.createElement("div",null,r.a.createElement("p",null,"Dinkar     - cs18b010@iittp.ac.in"),r.a.createElement("p",null,"Arpit      - cs18b003@iittp.ac.in"),r.a.createElement("p",null,"Sudheesh    - cs18b020@iittp.ac.in"),r.a.createElement("p",null,"Shreyansh  - cs18b042@iittp.ac.in")),onOk:function(){}})}var Ve,Ye=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={someStateVariable:"hi"},n}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(w.a,null,r.a.createElement(B,null),r.a.createElement(w.a,{style:{marginTop:"64px"}},r.a.createElement(Ue,null)),r.a.createElement(ze,{width:300,style:{padding:"25px",marginTop:"48px",right:0,position:"fixed",height:"100vh"}},r.a.createElement(x.b,{itemLayout:"horizontal",header:r.a.createElement("div",{style:{fontWeight:"bolder",padding:"5px",fontSize:"medium"}},"Saved events"),renderItem:function(e){return r.a.createElement(x.b.Item,null,r.a.createElement(x.b.Item.Meta,null))}}),r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement(D.a,{size:"small",style:{width:200,marginLeft:25},bodyStyle:{color:"#97033e",fontWeight:"bold"},bordered:!1,actions:[r.a.createElement("p",{onClick:Fe},r.a.createElement(k.a,{hoverable:!0,key:"learnMoreAwards"})," Learn more "),r.a.createElement("p",{onClick:Fe},r.a.createElement(j.a,{hoverable:!0,key:"buyAwards"})," Buy now! ")]},r.a.createElement("p",null,r.a.createElement(T.a.Group,null,r.a.createElement(T.a,{size:"small",src:"https://www.clipartmax.com/png/small/119-1190442_shield-batch-star-safe-badge-sheriff-police-icon-badge.png"}),r.a.createElement(T.a,{size:"large",src:"https://www.clipartmax.com/png/small/216-2160288_shield-badge-star-reward-award-honor-achievement-comments-sheriff-shield.png"}),r.a.createElement(T.a,{size:64,src:"https://www.clipartmax.com/png/small/155-1553987_all-finishers-will-receive-a-custom-medal-award-icon.png"}),r.a.createElement(T.a,{size:"large",src:"https://www.clipartmax.com/png/small/216-2160288_shield-badge-star-reward-award-honor-achievement-comments-sheriff-shield.png"}),r.a.createElement(T.a,{size:"small",src:"https://www.clipartmax.com/png/small/119-1190442_shield-batch-star-safe-badge-sheriff-police-icon-badge.png"})),"NofoodWasted awards are the best way to show your appreciation for work of other users!"))),r.a.createElement("div",{style:{marginTop:"64px",marginLeft:0}},r.a.createElement(S.b,{split:r.a.createElement(A.a,{type:"vertical",style:{color:"black",paddingLeft:"5px"}})},r.a.createElement(R.a,{onClick:qe,type:"link"},"About"),r.a.createElement(R.a,{onClick:We,type:"link"},"Help"),r.a.createElement(R.a,{onClick:Be,type:"link"},"Contact us")))))}}]),a}(n.Component),Xe=Object(m.b)((function(e){return{someData:e.homeReducer.someData}}),(function(e){return{getSomeData:Object(f.bindActionCreators)(O,e)}}))(Ye),Ke=a(615),Je=a(616),Qe=a(617),$e=a(618),Ze=a(619),et=a(620),tt=a(621),at=(a(240),function(e){e?y.a.defaults.headers.common.Authorization=e:delete y.a.defaults.headers.common.Authorization}),nt=a(169),rt="GET_ERRORS",ot="USER_LOADING",it="SET_CURRENT_USER",st="CLEAR_ERRORS",ct=a(289),lt=a.n(ct),ut="GET_THREADS",pt="UPDATE_THREAD",dt=function(){return function(){var e=Object(b.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/message/getThreads");case 3:a=e.sent,t({type:ut,payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"GET_ERRORS",payload:e.t0.response.data});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},mt=function(e){return function(t){t({type:pt,payload:e})}},ft=function(e,t,a){return function(){var n=Object(b.a)(g.a.mark((function n(r){var o;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.a.post("/api/message/send",{threadId:e,body:t,type:a});case 3:o=n.sent,r({type:pt,payload:o.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r({type:"GET_ERRORS",payload:n.t0.response.data});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},ht=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.post("/api/message/new-thread",{receiver:e});case 3:n=t.sent,a({type:pt,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},gt=a(290),bt=a(291),vt=a(212),Et=a(292),yt=a.n(Et),Ot=a(8),kt={someData:"initilProp"},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:e=Object(Ot.a)(Object(Ot.a)({},e),{},{someData:t.payload})}return e},wt={currentRoute:"home"},Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:e=Object(Ot.a)(Object(Ot.a)({},e),{},{currentRoute:t.payload});break;case"LOGOUT":e=Object(Ot.a)({},wt)}return e},xt=a(498),Dt={isAuthenticated:!1,user:{},loading:!1,errors:{}},Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case it:return Object(Ot.a)(Object(Ot.a)({},e),{},{isAuthenticated:!xt(t.payload),user:t.payload});case ot:return Object(Ot.a)(Object(Ot.a)({},e),{},{loading:!0});case rt:return Object(Ot.a)(Object(Ot.a)({},e),{},{errors:t.payload});case st:return Object(Ot.a)(Object(Ot.a)({},e),{},{errors:{}});case"LOGOUT":return Object(Ot.a)({},Dt);default:return e}},St=a(49),At={postComments:[{postId:1,comments:[{author:"Arpit Bandejiya",avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:"hello there",datetime:"2000-12-11"}]},{postId:2,comments:[{author:"Krishnendu",avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:"hello there",datetime:"2000-12-11"}]},{postId:3,comments:[{author:"Shreyansh",avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:"hello there",datetime:"2000-12-11"}]},{postId:4,comments:[{author:"Dinkar",avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:"hello there",datetime:"2000-12-11"}]}],posts:[],currentfilter:["Donations","Events","Posts"]},Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(Ot.a)(Object(Ot.a)({},e),{},{someData:t.payload});case"GET_POST":console.log("this should work"),console.log(t.allcomments),e=Object(Ot.a)(Object(Ot.a)({},e),{},{posts:t.payload,postComments:t.allcomments});break;case"ADD_POST":console.log("inside the ADD post"),console.log(t.post);var a=[].concat(Object(St.a)(e.posts),[t.post]),n=[].concat(Object(St.a)(e.postComments),[t.comment]);return console.log(a),Object(Ot.a)(Object(Ot.a)({},e),{},{posts:a,postComments:n});case"CHANGE_LIKE":var r=Object(St.a)(e.posts),o=r.find((function(e){return e._id==t.id}));return o.liked?(o.noOfLikes=o.noOfLikes-1,o.liked=!1):(o.noOfLikes=o.noOfLikes+1,o.liked=!0),console.log(r),Object(Ot.a)(Object(Ot.a)({},e),{},{posts:r});case"ADD_COMMENT":return Object(Ot.a)(Object(Ot.a)({},e),{},{postComments:e.postComments.map((function(e){return e.postId==t.id?Object(Ot.a)(Object(Ot.a)({},e),{},{comments:[].concat(Object(St.a)(e.comments),[t.comment])}):Object(Ot.a)({},e)}))})}return e},It={profileDetails:{name:"",avatar:"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&s=50",followers:[],following:[],donations:[],achievements:[]},currentfilter:[]},Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:e=Object(Ot.a)(Object(Ot.a)({},e),{},{currentfilter:t.selectedfilters});break;case P:e=Object(Ot.a)(Object(Ot.a)({},e),{},{profileDetails:t.payload});break;case"LOGOUT":e=Object(Ot.a)({},It);break;case"ADD_DONATION":e=Object(Ot.a)(Object(Ot.a)({},e),{},{profileDetails:Object(Ot.a)(Object(Ot.a)({},e.profileDetails),{},{donations:[].concat(Object(St.a)(e.profileDetails.donations),[{_id:t.payload._id,title:t.payload.title}])})}),console.log("inside the left side reducer",e.profileDetails.donations)}return e},Nt=a(7),Lt=a.n(Nt),_t="CHANGE_FILTERS",Mt={Donations:[{donorId:"",receiverId:"",title:"Check",acceptedTime:"",donorName:"Arpit",contact:9411890675,postTime:"12-10-2020",description:"Card content description",peoplefed:0,status:"NotAccepted",location:{type:"Point",coordinates:[]},images:["https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png"]},{donorId:"",receiverId:"",title:"Check",acceptedTime:"",donorName:"Dinkar",contact:9411890675,postTime:"12-10-2020",description:"Card content description",peoplefed:0,status:"NotAccepted",location:{type:"Point",coordinates:[]},images:["https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png"]},{donorId:"",receiverId:"",title:"Check",acceptedTime:"",donorName:"Krish",contact:9411890675,postTime:"12-10-2020",description:"Card content description",peoplefed:0,status:"NotAccepted",location:{type:"Point",coordinates:[]},images:["https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png"]},{donorId:"",receiverId:"",title:"Check",acceptedTime:"",donorName:"Shreyansh",contact:9411890675,postTime:"12-10-2020",description:"Card content description",peoplefed:0,status:"NotAccepted",location:{type:"Point",coordinates:[]},images:["https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png"]}],Organisations:[{organisationName:"Arpit1",contact:9411890675,address:"Address",description:"Brief description",peoplefed:"0",imageurl:[]}],Events:[],currentfilter:[]},Gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DONATION":return Object(Ot.a)(Object(Ot.a)({},e),{},{Donations:t.donations});case"GET_ORGANISATION":return Object(Ot.a)(Object(Ot.a)({},e),{},{Organisations:t.organisations});case _t:return Object(Ot.a)(Object(Ot.a)({},e),{},{currentfilter:t.selectedfilters});case"ADD_DONATION":var a=t.payload;return Object(Ot.a)(Object(Ot.a)({},e),{},{Donations:[].concat(Object(St.a)(e.Donations),[a])});case"PENDING_DONATION":var n=t.payload;return n.status="pending",n.receiverId=t.userId,console.log("inside the discover reducer!",n),Object(Ot.a)(Object(Ot.a)({},e),{},{Donations:e.Donations.map((function(e){return e._id==n._id?Object(Ot.a)({},n):Object(Ot.a)({},e)}))});case"REJECT_DONATION":return console.log("called to reject donations"),Object(Ot.a)(Object(Ot.a)({},e),{},{Donations:e.Donations.map((function(e){return e._id==t.id?Object(Ot.a)(Object(Ot.a)({},e),{},{status:"NotAccepted",receiverId:null}):Object(Ot.a)({},e)}))});case"ACCEPT_DONATION":return Object(Ot.a)(Object(Ot.a)({},e),{},{Donations:e.Donations.map((function(e){return e._id==t.payload._id?Object(Ot.a)(Object(Ot.a)({},e),{},{status:"Accepted"}):Object(Ot.a)({},e)}))})}return e},Ht="GET_SOME_DATA",Ut={users:[{user_name:"Arpit",description:"Brief Description",id:1},{user_name:"Dinkar",description:"Brief Description",id:2},{user_name:"Sudheesh",description:"Brief Description",id:3},{user_name:"Shreyansh",description:"Brief Description",id:4}]},zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ht:e=Object(Ot.a)(Object(Ot.a)({},e),{},{someData:t.payload})}return e},Ft={suggestedPages:[{title:"User 1"},{title:"User 2"},{title:"User 3"},{title:"User 4"}],profileDetails:{profilePic:"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&s=400",avatar:"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&s=50",name:"",description:"",contact:"",address:"",followers:[],following:[],donations:[],history:[],posts:[],noFed:0,noDonations:0},Pending:[{donorname:"Arpit1",posttime:"000",Description:"Brief description"}],currentTab:"timelinePost",followers:[],following:[]},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:e=Object(Ot.a)(Object(Ot.a)({},e),{},{someData:t.payload});break;case se:e=Object(Ot.a)(Object(Ot.a)({},e),{},{suggestedPages:t.payload});break;case ce:e=Object(Ot.a)(Object(Ot.a)({},e),{},{currentTab:t.payload});break;case le:e=Object(Ot.a)(Object(Ot.a)({},e),{},{profileDetails:Object(Ot.a)(Object(Ot.a)({},t.payload),{},{followers:Object(St.a)(t.payload.followers),following:Object(St.a)(t.payload.following)})});break;case ue:e=Object(Ot.a)(Object(Ot.a)({},e),{},{profileDetails:Object(Ot.a)(Object(Ot.a)({},e.profileDetails),t.payload)});break;case pe:e=Object(Ot.a)(Object(Ot.a)({},e),{},{followers:Object(St.a)(t.payload)});break;case de:e=Object(Ot.a)(Object(Ot.a)({},e),{},{following:Object(St.a)(t.payload)});break;case"PENDING_DONATION":var a=t.payload,n=a.donorName,r=a.postTime,o=a.description,i={donorname:n,Description:o,posttime:r};return Object(Ot.a)(Object(Ot.a)({},e),{},{Pending:[].concat(Object(St.a)(e.Pending),[i])});case"LOGOUT":e=Object(Ot.a)({},Ft);break;case"GET_PENDING_DONATION":return console.log(t.payload),Object(Ot.a)(Object(Ot.a)({},e),{},{Pending:t.payload});case"REJECT_DONATION":return Object(Ot.a)(Object(Ot.a)({},e),{},{Pending:e.Pending.filter((function(e){return e._id!==t.id}))});case"ACCEPT_DONATION":return Object(Ot.a)(Object(Ot.a)({},e),{},{Pending:e.Pending.filter((function(e){return e._id!==t.payload._id}))});case"ADD_HISTORY":return console.log("reciveved from the donate"),console.log(t.payload),Object(Ot.a)(Object(Ot.a)({},e),{},{profileDetails:t.payload})}return e},Wt={threads:[]},Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ut:e=Object(Ot.a)(Object(Ot.a)({},e),{},{threads:Object(St.a)(t.payload)});break;case pt:var a=e.threads.filter((function(e){return e._id!=t.payload._id}));e=Object(Ot.a)(Object(Ot.a)({},e),{},{threads:[t.payload].concat(Object(St.a)(a))});break;case"LOGOUT":e=Object(Ot.a)({},Wt)}return e},Vt={key:"root",storage:yt.a},Yt=Object(f.combineReducers)({homeReducer:jt,navReducer:Ct,authReducer:Tt,HomeCenterReducer:Rt,DiscoverReducer:Gt,ListReducer:zt,LeftSidePanelReducer:Pt,profileReducer:qt,messageReducer:Bt}),Xt=Object(vt.a)(Vt,Yt),Kt=Object(f.createStore)(Xt,{},Object(gt.composeWithDevTools)(Object(f.applyMiddleware)(bt.a))),Jt=Object(vt.b)(Kt),Qt=function(){var e;if(console.log("someone wants to start connection",Ve),Ve)return console.log("socket already there"),Ve;var t=null===(e=Kt.getState().authReducer.user)||void 0===e?void 0:e.userId;return(Ve=lt()("/",{query:"user=".concat(t),reconnection:!0})).on("output_message",(function(e){Kt.dispatch(mt(e)),console.log("WOW... I got it",e)})),Ve},$t=function(e,t){return function(){var a=Object(b.a)(g.a.mark((function a(n){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e),a.next=3,y.a.post("/api/users/register",e).then((function(e){return t.push("/login")})).catch((function(e){return n({type:rt,payload:e.response.data})}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Zt=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.post("/api/users/login",e).then((function(e){var t=e.data.token;localStorage.setItem("jwtToken",t),at(t);var n=Object(nt.a)(t);a(ea(n)),Qt()})).catch((function(e){return a({type:rt,payload:e.response.data})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ea=function(e){return{type:it,payload:e}},ta=function(){return function(e){console.log("dsa"),localStorage.removeItem("jwtToken"),at(!1),e(ea({})),e({type:"LOGOUT"})}},aa=function(){return function(e){e({type:st})}},na=a(588),ra=a(125),oa=a(85),ia=a(614),sa=a(293),ca=a(633),la=a(634),ua=a(587),pa=a(635),da=(a(499),a(294));a(500),a(501),a(502),a(503);delete Lt.a.Icon.Default.prototype._getIconUrl,Lt.a.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.4.0/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.4.0/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.4.0/dist/images/marker-shadow.png"});var ma=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).addMarker=function(t){var a=e.state.markers;a.pop(),a.push(t.latlng),console.log(a),e.props.saveLatLng(a[0]),e.setState({markers:a})},e.state={markers:[]},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.leafletMap.leafletElement,t=(new sa.Geosearch).addTo(e),a=(new Lt.a.LayerGroup).addTo(e);t.on("results",(function(e){a.clearLayers();for(var t=e.results.length-1;t>=e.results.length-1;t--)a.addLayer(Lt.a.marker(e.results[t].latlng))}))}},{key:"render",value:function(){var e=this,t=this.props.coords?this.props.coords.longitude:77.209,a=this.props.coords?this.props.coords.latitude:28.6139;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"MAP"},r.a.createElement(ca.a,{style:{height:"80vh"},center:[a,t],zoom:"10",ref:function(t){e.leafletMap=t},onClick:this.addMarker},r.a.createElement(la.a,{attribution:"\xa9 <a href='https://osm.org/copyright'>OpenStreetMap</a> contributors",url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.a.createElement("div",{className:"pointer"}),this.props.coords?r.a.createElement(ua.a,{position:[a,t]},r.a.createElement(pa.a,null,"you are here!")):r.a.createElement("div",{className:"loading"},"Loading"),this.state.markers.map((function(e,t){return r.a.createElement(ua.a,{draggable:!0,key:"marker-".concat(t),position:e},r.a.createElement(pa.a,null,r.a.createElement("span",null,"Marked Location")))})))))}}]),a}(n.Component),fa=Object(da.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:1e3})(ma),ha=function(e,t){return function(){var a=Object(b.a)(g.a.mark((function a(n){var r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("this is add donations",e),a.next=3,y.a.post("/api/donation/create",{donation:e});case 3:r=a.sent,console.log(r.data.donation),n({type:"ADD_DONATION",payload:Object(Ot.a)(Object(Ot.a)({},r.data.donation),{},{contact:t})});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},ga={labelCol:{span:6},wrapperCol:{span:14}},ba={rules:[{type:"object",required:!0,message:"Please select time!"}]},va=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},Ea=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={user:"Name"},e.saveLatLng=function(t){e.setState({latlng:t})},e.onChange=function(t,a){e.setState({Date:a})},e.disabledDate=function(e){return e&&e<oe()().endOf("day")},e.state={title:"",description:"",Date:"",files:[],mapOpen:!1,latlng:null},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state.latlng;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{destroyOnClose:!0,visible:this.props.visible,title:"Donation Details",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(R.a,{key:"back",onClick:this.props.handleCancel},"Return"),r.a.createElement(R.a,{key:"submit",type:"primary",loading:this.props.loading,form:"donateform",htmlType:"submit"},"Submit")]},r.a.createElement(Z.a,Object.assign({id:"donateform",name:"validate_other",onFieldsChange:function(t,a){e.setState({title:a[0].value,description:a[1].value})},onFinish:function(t){if(void 0!==e.state.latlng){e.props.handleOk();var a=t.dragger,n=null===a||void 0===a?void 0:a.map((function(e){return e.response.location}));console.log("this is to create the post",n);var r={donorId:e.props.profileDetails._id,title:e.state.title,expiryTime:e.state.Date,peopleFed:0,status:"NotAccepted",description:e.state.description,location:{type:"Point",coordinates:[e.state.latlng.lng,e.state.latlng.lat]},images:e.state.files,donorName:e.props.profileDetails.name};e.props.addDonation(r,e.props.profileDetails.contact),e.props.addHistory({color:"blue",icon:"clock",text:r.title+" ( Donation expires on "+r.expiryTime+" )"}),e.setState({latlng:null,files:[]})}}},ga),r.a.createElement(Z.a.Item,Object.assign({},ga,{name:"username",label:"Title",rules:[{required:!0,message:"Please input your Title"}]}),r.a.createElement(ee.a,{placeholder:"Please input your Title"})),r.a.createElement(Z.a.Item,{name:["user","ItemDetails"],label:"ItemDetails",rules:[{required:!0,message:"Please Enter Items details"}]},r.a.createElement(ee.a.TextArea,{placeholder:"Please Enter Items details here"})),r.a.createElement(Z.a.Item,Object.assign({name:"date-picker",label:"Enter expiry date"},ba),r.a.createElement(na.a,{onChange:this.onChange,disabledDate:this.disabledDate,format:"HH:mm ll"})),r.a.createElement(Z.a.Item,{label:"Address",rules:[{required:!0,message:"Please input your address"}]},r.a.createElement(ra.a,{gutter:8},r.a.createElement(oa.a,{span:20},r.a.createElement(ee.a,{placeholder:"Location",disabled:!0,value:t?t.lat+" , "+t.lng:""})),r.a.createElement(oa.a,{span:2},r.a.createElement(R.a,{onClick:function(){return e.setState({mapOpen:!0})},icon:r.a.createElement(ia.a,null)})))),r.a.createElement(Z.a.Item,{label:"Dragger"},r.a.createElement(Z.a.Item,{name:"dragger",valuePropName:"fileList",getValueFromEvent:va,noStyle:!0},r.a.createElement(te.a.Dragger,{multiple:!1,name:"file",customRequest:function(){var t=Object(b.a)(g.a.mark((function t(a){var n,r,o,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.file,r=a.onSuccess,o=a.onError,(i=new FormData).append("file",n),t.next=5,y.a.post("/upload/donations",i).then((function(t){var a;r(t.data),console.log(t.data),a=t.data,e.setState({files:[].concat(Object(St.a)(e.state.files),[a.location])}),console.log("When the form is finished",e.state.files)})).catch((function(e){console.log("error in uploading"),o("Error in uploading.Try again")}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(ae.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),r.a.createElement("p",{className:"ant-upload-hint"},"Support for a single or bulk upload.")))))),r.a.createElement(C.a,{footer:[r.a.createElement(R.a,{onClick:function(){return e.setState({mapOpen:!1})}},"Return")],centered:!0,closable:!1,width:"90vw",visible:this.state.mapOpen},r.a.createElement(fa,{saveLatLng:this.saveLatLng})))}}]),a}(n.Component),ya=Object(m.b)((function(e){return{profileDetails:e.LeftSidePanelReducer.profileDetails}}),(function(e){return{addHistory:Object(f.bindActionCreators)(he,e),addDonation:Object(f.bindActionCreators)(ha,e)}}))(Ea),Oa=w.a.Header,ka=ee.a.Search,ja=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,visible:!1},e.showModal=function(){e.setState({visible:!0})},e.handleOk=function(){e.setState({loading:!0}),setTimeout((function(){e.setState({loading:!1,visible:!1})}),500),C.a.success({content:"Donations posted"})},e.handleCancel=function(){e.setState({visible:!1})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.visible,a=e.loading,n=this.props,o=n.currentRoute,i=n.setCurrentRoute,s=n.logoutUser,c=n.auth;return c.isAuthenticated?r.a.createElement("div",null,r.a.createElement(Oa,{style:{position:"fixed",zIndex:100,width:"100%"}},r.a.createElement(_.a,{theme:"dark",mode:"horizontal",selectedKeys:[o,"logo"],onSelect:function(e){"logout"==e.key?s():i(e.key)}},r.a.createElement(_.a.Item,{key:"logo",className:"customclasslogo",icon:r.a.createElement(Ke.a,null)},r.a.createElement(H.b,{to:"/home"},"NofoodWasted")),r.a.createElement(R.a,{type:"dashed",size:"large",style:{marginRight:"8px",marginLeft:"8px"},onClick:this.showModal},"Donate Now!"),r.a.createElement(ya,{handleCancel:this.handleCancel,handleOk:this.handleOk,showModal:this.showModal,visible:t,loading:a}),r.a.createElement(_.a.Item,{key:"home",icon:r.a.createElement(Je.a,null)},r.a.createElement(H.b,{to:"/home"},"Home")),r.a.createElement(_.a.Item,{key:"discover",icon:r.a.createElement(k.a,null)},r.a.createElement(H.b,{to:"/discover"},"Discover")),r.a.createElement(_.a.Item,{key:"community",icon:r.a.createElement(Qe.a,null)},r.a.createElement(H.b,{to:"/community"},"Community")),r.a.createElement(_.a.Item,{key:"leaderboard",icon:r.a.createElement($e.a,null)},r.a.createElement(H.b,{to:"/leaderboard"},"Leaderboard")),r.a.createElement(_.a.Item,{key:"notifications",icon:r.a.createElement(Ze.a,null)},r.a.createElement(H.b,{to:"/notifications"},"Notifications")),r.a.createElement(_.a.Item,{key:"messages",icon:r.a.createElement(et.a,null)},r.a.createElement(H.b,{to:"/messages"},"Messages")),r.a.createElement(_.a.Item,{key:"profile",icon:r.a.createElement(G.a,null)},r.a.createElement(H.b,{to:"/i/profile/".concat(c.user.userId)},"Profile")),r.a.createElement(_.a.Item,{key:"search"},r.a.createElement(ka,{placeholder:"Search",onSearch:function(e){return console.log(e)},style:{width:200}})),r.a.createElement(_.a.Item,{key:"logout",icon:r.a.createElement(tt.a,null)},"Logout")))):null}}]),a}(n.Component),wa=Object(c.g)(Object(m.b)((function(e){return{currentRoute:e.navReducer.currentRoute,auth:e.authReducer}}),(function(e){return{setCurrentRoute:Object(f.bindActionCreators)(z,e),logoutUser:Object(f.bindActionCreators)(ta,e)}}))(ja)),Ca=a(625),xa=a(626),Da=a(627),Ta=a(622),Sa=a(628),Aa=a(629),Ra=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{title:"List",visible:this.props.visible,onOk:this.props.handleOk,onCancel:this.props.handleCancel},r.a.createElement(x.b,{itemLayout:"horizontal",dataSource:e,renderItem:function(e){return r.a.createElement(x.b.Item,null,r.a.createElement(x.b.Item.Meta,{avatar:r.a.createElement(T.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:r.a.createElement("a",null,e.user_name),description:e.description}))}}),","))}}]),a}(r.a.Component),Ia=(Object(m.b)((function(e){return{data:e.ListReducer.users}}))(Ra),a(107)),Pa=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e,t=this.props.data;return console.log(this.props),r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{visible:this.props.visible,title:"Edit Profile",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(R.a,{key:"back",onClick:this.props.handleCancel},"Return"),r.a.createElement(R.a,{form:"edit-profile-form",key:"submit",type:"primary",htmlType:"submit",loading:this.props.loading},"Submit")]},r.a.createElement(Z.a,{id:"edit-profile-form",layout:"vertical",name:"form_in_modal",initialValues:(e={},Object(Ia.a)(e,"name",t.name),Object(Ia.a)(e,"contact",t.contact),Object(Ia.a)(e,"address",t.address),Object(Ia.a)(e,"description",t.description),e),onFinish:this.props.handleOk},r.a.createElement(Z.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name!"}]},r.a.createElement(ee.a,{prefix:r.a.createElement(G.a,{className:"site-form-item-icon"})})),r.a.createElement(Z.a.Item,{label:"Contact",name:"contact",rules:[{required:!0,message:"Please input your contact!"}]},r.a.createElement(ee.a,{prefix:r.a.createElement(Ta.a,{className:"site-form-item-icon"})})),r.a.createElement(Z.a.Item,{label:"Address",name:"address",rules:[{required:!0,message:"Please input your address!"}]},r.a.createElement(ee.a.TextArea,null)),r.a.createElement(Z.a.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Please input a brief description!"}]},r.a.createElement(ee.a.TextArea,null)))))}}]),a}(r.a.Component),Na=Object(m.b)((function(e){return{data:e.profileReducer.profileDetails}}))(Pa),La=a(211),_a=a(600),Ma=a(623),Ga=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{visible:this.props.visible,title:"Change Profile Picture",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(R.a,{key:"back",onClick:this.props.handleCancel},"Return")]},r.a.createElement(te.a,{multiple:!1,name:"file",accept:"image/*",customRequest:function(){var t=Object(b.a)(g.a.mark((function t(a){var n,r,o,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.file,r=a.onSuccess,o=a.onError,(i=new FormData).append("file",n),t.next=5,y.a.post("/upload/profile-pic",i).then((function(t){r(t.data),e.props.uploadProfilePic(t.data.profilePic,t.data.avatar)})).catch((function(e){console.log("error in uploading"),o("Error in uploading. Try again")}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),listType:"picture"},r.a.createElement(R.a,{icon:r.a.createElement(Ma.a,null)},"Upload Profile Pic"))))}}]),a}(r.a.Component),Ha=Object(m.b)(null,(function(e){return{uploadProfilePic:Object(f.bindActionCreators)(Ee,e)}}))(Ga),Ua=(a(510),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.title,o=t.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{title:n,visible:this.props.visible,onCancel:this.props.handleCancel,destroyOnClose:!0,footer:[r.a.createElement(R.a,{type:"primary",onClick:this.props.handleCancel},"Close")]},r.a.createElement(x.b,{itemLayout:"horizontal",dataSource:a,loading:o,renderItem:function(t){return r.a.createElement(x.b.Item,null,r.a.createElement(x.b.Item.Meta,{avatar:r.a.createElement(H.b,{onClick:e.props.handleCancel,to:"/profile/".concat(t._id)},r.a.createElement(T.a,{src:t.avatar})),title:r.a.createElement("a",null,t.name),description:t.description}))}}),","))}}]),a}(r.a.Component)),za=a(624);function Fa(){return r.a.createElement("div",{style:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"50px"}},r.a.createElement(za.a,null))}ee.a.Search,_.a.SubMenu;var qa=La.a.TabPane,Wa=(w.a.Header,w.a.Content),Ba=w.a.Sider,Va=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={followersVisible:!1,followingVisible:!1,loadingAccept:!1,visibleAccept:!1,visibleEdit:!1,visibleProfilePic:!1,loadingEdit:!1,clicked:!1,followLoading:!1,unfollowLoading:!1,followListLoading:!1,profilePageLoading:!1,followingText:"Following"},e.showModal=function(){e.setState({visible:!0})},e.handleOk=function(t){console.log(t),e.setState({visible:!1})},e.handleCancel=function(t){console.log(t),e.setState({visible:!1})},e.showModalAccept=function(t){console.log("inside the show modal accept"),e.props.acceptdonation(t),e.props.addHistory({color:"green",icon:"dot",text:t.title+" ( Donation accepted on "+oe()().format("HH:mm ll")+" )"}),e.setState({visibleAccept:!0})},e.handleOkAccept=function(){e.setState({loadingAccept:!0}),setTimeout((function(){e.setState({loadingAccept:!1,visibleAccept:!1})}),1e3),C.a.success({content:"Donation Shared on profile"})},e.handleCancelAccept=function(){e.setState({visibleAccept:!1})},e.handleCancelProfilePic=function(){e.setState({visibleProfilePic:!1})},e.showModalEdit=function(){e.setState({visibleEdit:!0})},e.handleOkEdit=function(){var t=Object(b.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loadingEdit:!0}),t.next=3,e.props.editProfile(a);case 3:e.setState({loadingEdit:!1,visibleEdit:!1});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleCancelEdit=function(){e.setState({visibleEdit:!1})},e.callback=function(e){console.log(e)},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({profilePageLoading:!0}),e.next=3,this.props.getProfile(this.props.match.params.id);case 3:this.props.getPendingDonations(),this.setState({profilePageLoading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a=this,n=this.state,o=n.followersVisible,i=n.followingVisible,s=n.loadingAccept,c=n.visibleAccept,l=n.visibleEdit,u=n.loadingEdit,p=n.visibleProfilePic,d=this.props,m=(d.suggestedPages,d.PendingDonations),f=(d.currentTab,d.changeTab,d.donations,d.timelinePost,d.posts,d.profileDetails),h=d.user,v=d.followUser,E=d.unfollowUser,y=d.getFollowers,O=d.getFollowing,k=(d.followers,d.following,function(){var e,t,a;return r.a.createElement(La.a,{centered:"true",size:"large"},r.a.createElement(qa,{tab:"Timeline",key:"timelinePost"},r.a.createElement(_a.a,{mode:"alternate"},null===f||void 0===f||null===(e=f.history)||void 0===e?void 0:e.map((function(e){return r.a.createElement(_a.a.Item,{color:null===e||void 0===e?void 0:e.color,dot:"clock"===(null===e||void 0===e?void 0:e.icon)?r.a.createElement(Ca.a,null):null},e.text)})))),r.a.createElement(qa,{tab:"Donations",key:"donations"},null===f||void 0===f||null===(t=f.donations)||void 0===t?void 0:t.map((function(e){return r.a.createElement(D.a,{title:e.title,extra:r.a.createElement("div",null,e.status),style:{marginLeft:"75px",marginRight:"75px",marginTop:"8px"}},r.a.createElement("p",null,e.description),r.a.createElement(S.b,null,(t=e.images).length?t.map((function(e){return r.a.createElement(V.a,{width:100,height:100,alt:"example",src:e})})):r.a.createElement("div",null," No images!")));var t}))),r.a.createElement(qa,{tab:"Posts",key:"posts"},null===f||void 0===f||null===(a=f.posts)||void 0===a?void 0:a.map((function(e){return r.a.createElement(D.a,{title:e.author,extra:e.DateTime,style:{marginLeft:"75px",marginRight:"75px",marginTop:"8px"}},r.a.createElement("p",null,e.description))}))),r.a.createElement(qa,{tab:"Acheivements",key:"achievements"},r.a.createElement("p",{style:{fontSize:"20px",textAlign:"center"}}," Coming Soon!")))}),j=m.length?m.map((function(e){return r.a.createElement(D.a,{title:e.donorName,extra:oe()(e.postTime).format("HH:mm ll"),size:"small",style:{width:250},actions:[r.a.createElement("p",{classname:"cardtext1",onClick:function(){return a.showModalAccept(e)}},r.a.createElement(xa.a,{hoverable:!0,key:"Accept"})," Accept "),r.a.createElement("p",{onClick:function(){return a.props.rejectDonation(e._id)}},r.a.createElement(Da.a,{hoverable:!0,key:"Reject"})," Reject ")]},r.a.createElement("p",null,e.description))})):r.a.createElement("div",null,"No Donations are currently there!");return this.state.profilePageLoading?r.a.createElement(Fa,null):r.a.createElement(w.a,{key:this.props.match.params.id,className:"layout",style:{marginTop:"56px"}},r.a.createElement(w.a,null,r.a.createElement(Ba,{width:250,style:{padding:"20px"}},r.a.createElement(x.b,{itemLayout:"horizontal",header:r.a.createElement("div",{style:{fontWeight:"bolder",padding:"5px",fontSize:"medium"}},"Suggested pages"),renderItem:function(e){return r.a.createElement(x.b.Item,null,r.a.createElement(x.b.Item.Meta,{avatar:r.a.createElement(T.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:r.a.createElement("a",{href:"https://www.google.com/"},e.title),description:"brief description"}))}})),r.a.createElement(w.a,null,r.a.createElement(Wa,{style:{padding:24,marginTop:24,minHeight:280},key:this.props.match.params.id},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(V.a,{width:250,src:null===f||void 0===f?void 0:f.profilePic}),r.a.createElement(R.a,{shape:"circle",style:{marginLeft:"-15px",zIndex:"10"},onClick:function(){return a.setState({visibleProfilePic:!0})}},r.a.createElement($.a,null)),r.a.createElement("div",{style:{marginLeft:"20px",display:"flex",flexDirection:"column",justifyContent:"space-evenly"}},r.a.createElement("p",{style:{fontSize:"24px",marginBottom:"0px",fontWeight:500}},f.name),r.a.createElement("div",null,r.a.createElement("p",null,null===f||void 0===f?void 0:f.description),r.a.createElement(Ta.a,null)," ",r.a.createElement("span",{style:{fontWeight:500,marginRight:"20px"}},null===f||void 0===f?void 0:f.contact),r.a.createElement(Je.a,null)," ",r.a.createElement("span",{style:{fontWeight:500}},null===f||void 0===f?void 0:f.address)),r.a.createElement("div",{style:{marginLeft:"-16px",marginTop:"6px"}},r.a.createElement(R.a,{type:"link",size:"large",style:{fontWeight:"bolder"},onClick:Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({followersVisible:!0,followListLoading:!0}),e.next=3,y(a.props.match.params.id);case 3:a.setState({followListLoading:!1});case 4:case"end":return e.stop()}}),e)})))},null===f||void 0===f||null===(e=f.followers)||void 0===e?void 0:e.length," Followers"),r.a.createElement(R.a,{type:"link",size:"large",style:{fontWeight:"bolder"},onClick:Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({followingVisible:!0,followListLoading:!0}),e.next=3,O(a.props.match.params.id);case 3:a.setState({followListLoading:!1});case 4:case"end":return e.stop()}}),e)})))},null===f||void 0===f||null===(t=f.following)||void 0===t?void 0:t.length," Following"),r.a.createElement(Ua,{title:"Followers",data:this.props.followers,handleCancel:function(){return a.setState({followersVisible:!1})},showModal:function(){return a.setState({followersVisible:!0})},visible:o,loading:this.state.followListLoading}),r.a.createElement(Ua,{title:"Following",data:this.props.following,handleCancel:function(){return a.setState({followingVisible:!1})},showModal:function(){return a.setState({followingVisible:!0})},visible:i,loading:this.state.followListLoading}),h.userId===this.props.match.params.id?r.a.createElement("span",{style:{float:"right",marginTop:"6px"}},r.a.createElement(R.a,{onClick:this.showModalEdit,type:"primary",style:{marginRight:"8px"}},r.a.createElement($.a,null)," Edit Profile"),r.a.createElement(Na,{handleCancel:this.handleCancelEdit,handleOk:this.handleOkEdit,showModal:this.showModalEdit,visible:l,loading:u}),r.a.createElement(Ha,{visible:p,handleCancel:this.handleCancelProfilePic})):r.a.createElement("span",{style:{float:"right",marginTop:"6px"}},r.a.createElement(r.a.Fragment,null,(null===f||void 0===f?void 0:f.followers.find((function(e){return e==h.userId})))?r.a.createElement(R.a,{onMouseOver:function(){a.setState({followingText:"Unfollow"})},onMouseLeave:function(){a.setState({followingText:"Following"})},loading:this.state.unfollowLoading,type:"Unfollow"==this.state.followingText?"danger":"primary",style:{marginRight:"14px"},onClick:Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({unfollowLoading:!0}),e.next=3,E(a.props.match.params.id);case 3:a.setState({unfollowLoading:!1});case 4:case"end":return e.stop()}}),e)})))},r.a.createElement("p",null," ",r.a.createElement(Sa.a,null)," ",this.state.followingText)):r.a.createElement(R.a,{loading:this.state.followLoading,type:"primary",style:{marginRight:"14px"},onClick:Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({followLoading:!0}),e.next=3,v(a.props.match.params.id);case 3:a.setState({followLoading:!1});case 4:case"end":return e.stop()}}),e)})))},r.a.createElement("p",null," ",r.a.createElement(Sa.a,null)," Follow ")),r.a.createElement(H.b,{onClick:function(){return a.props.setCurrentRoute("messages")},to:{pathname:"/messages",state:{user:this.props.match.params.id}}},r.a.createElement(R.a,{type:"primary",style:{marginRight:"14px"}},r.a.createElement(Aa.a,null)," Message"))))),r.a.createElement("div",{style:{marginTop:"8px"}},r.a.createElement("p",{style:{fontWeight:600}},r.a.createElement("span",null,null===f||void 0===f?void 0:f.name," has fed ",null===f||void 0===f?void 0:f.noFed," people and made ",null===f||void 0===f?void 0:f.noDonations," donations overall!"))))),r.a.createElement(A.a,{style:{background:"rgba(151,3,62, 0.2)"}}),r.a.createElement(k,null)),h.userId===this.props.match.params.id?r.a.createElement(Ba,{width:300,style:{padding:"20px"}},r.a.createElement("div",{style:{fontWeight:"bolder",paddingBottom:"15px",paddingTop:"15px",fontSize:"medium"}},"Pending Donations"),r.a.createElement("div",null,j)):null)),r.a.createElement(C.a,{visible:c,title:"Accept Donation",onOk:this.handleOkAccept,onCancel:this.handleCancelAccept,footer:[r.a.createElement(R.a,{key:"back",onClick:this.handleCancelAccept},"Say Thanks"),r.a.createElement(R.a,{key:"submit",type:"primary",loading:s,onClick:this.handleOkAccept},"Share Donation")]},r.a.createElement("b",null," Enter No of people will be fed from this donation ?"),r.a.createElement(ee.a,{placeholder:"Input Number Here"}),r.a.createElement("b",null," Rate the User"),r.a.createElement(ee.a,{placeholder:"Rate Between 1 to 5"})))}}]),a}(n.Component),Ya=Object(m.b)((function(e){return console.log(e.profileReducer.profileDetails),{suggestedPages:e.profileReducer.suggestedPages,currentTab:e.profileReducer.currentTab,donations:e.profileReducer.donations,timelinePost:e.profileReducer.profileDetails.history,posts:e.profileReducer.posts,PendingDonations:e.profileReducer.Pending,profileDetails:e.profileReducer.profileDetails,user:e.authReducer.user,followers:e.profileReducer.followers,following:e.profileReducer.following}}),(function(e){return{addHistory:Object(f.bindActionCreators)(he,e),acceptdonation:Object(f.bindActionCreators)(me,e),getSomeData:Object(f.bindActionCreators)(fe,e),changeTab:Object(f.bindActionCreators)(ve,e),getProfile:Object(f.bindActionCreators)(ge,e),followUser:Object(f.bindActionCreators)(ye,e),unfollowUser:Object(f.bindActionCreators)(Oe,e),getFollowers:Object(f.bindActionCreators)(ke,e),getFollowing:Object(f.bindActionCreators)(je,e),setCurrentRoute:Object(f.bindActionCreators)(z,e),rejectDonation:Object(f.bindActionCreators)(we,e),getPendingDonations:Object(f.bindActionCreators)(be,e),editProfile:Object(f.bindActionCreators)(Ce,e)}}))(Va),Xa=(a(511),function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:_t,selectedfilters:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),Ka=function(){return function(){var e=Object(b.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("get the organisaions"),e.next=3,y.a.get("api/users/organisations");case 3:a=e.sent,console.log("get organisations",a.data.organisations),t({type:"GET_ORGANISATION",organisations:a.data.organisations});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ja=function(){return function(){var e=Object(b.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/api/donation/donations");case 2:a=e.sent,console.log("THis is inside the get donations",a.data),t({type:"GET_DONATION",donations:a.data.donations});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Qa=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a,n){var r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().authReducer.user.userId,t.next=3,y.a.post("/api/donation/changeStatus",{_id:e._id,status:"pending"});case 3:o=t.sent,console.log(o.data),a({type:"PENDING_DONATION",payload:e,userId:r});case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},$a=a(210),Za=a.n($a),en=w.a.Content,tn=w.a.Sider,an=_.a.SubMenu;var nn=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={Organisations:[{organisationName:"Arpit1",address:"Address",contact:"contact no",peoplefed:"0",description:"Brief description"},{organisationName:"Arpit1",address:"Address",contact:"contact no",peoplefed:"0",description:"Brief description"},{organisationName:"Arpit1",address:"Address",contact:"contact no",peoplefed:"0",description:"Brief description"},{organisationName:"Arpit1",address:"Address",contact:"contact no",peoplefed:"0",description:"Brief description"},{organisationName:"Arpit1",address:"Address",contact:"contact no",peoplefed:"0",description:"Brief description"}],Events:[],selectedMenuItem:"1",loading:!1,visible:!1,filters:[]},e.showModal=function(t){e.props.acceptdonation(t),e.setState({visible:!0})},e.handleOk=function(){e.setState({loading:!0}),setTimeout((function(){e.setState({loading:!1,visible:!1})}),1e3),C.a.success({content:"Donation Shared on profile"})},e.handleCancel=function(){e.setState({visible:!1})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props.getOrganisation),this.props.getOrganisation(),this.props.getDonation()}},{key:"render",value:function(){var e=this,t=this.state,a=t.Events,n=t.selectedMenuItem,o=t.visible,i=t.loading,s=this.props,c=s.Organisations,l=s.Donations,u=s.pendingDonations,p=s.pendingDonorDonation,d=function(t){return 0===e.props.userType.localeCompare("donor")?[]:[r.a.createElement(H.b,{to:{pathname:"/messages",state:{user:t.donorId}}},r.a.createElement("p",{className:"text",onClick:function(){e.props.setCurrentRoute("messages")}},r.a.createElement("b",null," Contact Donor "))),r.a.createElement("p",{className:"text",onClick:function(){return function(t){t._id,t.donorName,t.postTime,t.description;e.props.pendingDonation(t)}(t)}},r.a.createElement("b",null," Interested "))]},m=function(t){var a=e.state.filters;if(console.log(a),a.find((function(e){return 0===e.localeCompare("Time")}))){var n=Za()(t,(function(e){return new oe.a(e.createdAt)}));return console.log(n),n}if(a.find((function(e){return 0===e.localeCompare("Expiry Date")}))){var r=Za()(t,(function(e){return new oe.a(e.expiryTime)}));return console.log(r),r}return t}(l),f=l.length?m.map((function(t){return r.a.createElement(D.a,{title:r.a.createElement(H.b,{onClick:function(){return e.props.setCurrentRoute("profile")},to:"/profile/".concat(t.donorId)},t.donorName),extra:r.a.createElement("div",null,oe()(t.postTime).format("HH:mm ll")),style:{width:700,margin:"8px"},actions:d(t)},r.a.createElement("p",null,t.description),r.a.createElement(S.b,null,(a=t.images).length?a.map((function(e){return r.a.createElement(V.a,{width:100,height:100,alt:"example",src:e})})):r.a.createElement("div",null," No images!")));var a})):r.a.createElement("div",null,"No Donations are currently there!"),h=u.length?u.map((function(t){return r.a.createElement(D.a,{title:t.donorName,extra:oe()(t.postTime).format("HH:mm ll"),size:"small",style:{width:250},actions:[r.a.createElement("p",{classname:"cardtext1",onClick:function(){return e.showModal(t)}},r.a.createElement(xa.a,{hoverable:!0,key:"Accept"})," Accept "),r.a.createElement("p",{onClick:function(){return e.props.rejectDonation(t._id)}},r.a.createElement(Da.a,{hoverable:!0,key:"Reject"})," Reject ")]},r.a.createElement("p",null,t.description))})):r.a.createElement("div",null,"No Donations are currently there!"),g=p.length?p.map((function(e){return r.a.createElement(D.a,{title:e.donorName,extra:oe()(e.postTime).format("HH:mm ll"),size:"small",style:{width:250}},r.a.createElement("p",null,e.description))})):r.a.createElement("div",null,"No Donations are currently there!"),b=c.length?c.map((function(t){return r.a.createElement(D.a,{title:r.a.createElement("div",null," ",r.a.createElement(H.b,{onClick:function(){return e.props.setCurrentRoute("profile")},to:"/profile/".concat(t._id)},r.a.createElement(T.a,{src:t.avatar,alt:"Han Solo"}))," ",r.a.createElement("a",null,t.name)," "),extra:r.a.createElement("p",null,"People fed ",null===t||void 0===t?void 0:t.noFed),style:{width:700,margin:"8px"}},r.a.createElement("p",null,r.a.createElement(Ta.a,null)," : ",t.contact," ",r.a.createElement(Je.a,null)," : ",t.address," "),r.a.createElement("p",null,t.description))})):r.a.createElement("div",null,"No Organisation are currently there!"),v=a.length?a.map((function(e){return r.a.createElement(D.a,{title:e.title,style:{width:700,margin:"8px"}},r.a.createElement("p",null,e.description))})):r.a.createElement("div",null,"No Events are currently there!"),E=function(t){e.setState({selectedMenuItem:t})};return r.a.createElement(w.a,null,r.a.createElement(tn,{width:280,className:"site-layout-background",style:{overflow:"auto",height:"100vh",position:"fixed",left:0,marginTop:"64px"}},r.a.createElement(_.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["1"],style:{height:"100%",borderRight:0},onClick:function(e){return E(e.key)}},r.a.createElement(an,{key:"1",title:"Donations",onTitleClick:function(e){return E(e.key)},style:{fontSize:"16px"}},r.a.createElement("div",{style:{padding:"auto"}},r.a.createElement(M.a.Group,{options:[{label:"Location",value:"Location"},{label:"Expiry Date",value:"Expiry Date"},{label:"Time",value:"Time"}],onChange:function(t){console.log(t),e.setState({filters:Object(St.a)(t)})}}))),r.a.createElement(_.a.Item,{key:"2"},"Nearby Organisations"),r.a.createElement(_.a.Item,{key:"3"},"Nearby Events/Activities"))),r.a.createElement(w.a,{style:{marginLeft:"280px",marginTop:"64px"}},r.a.createElement(en,{className:"site-layout-background",style:{paddingLeft:120,minHeight:280}},function(e){switch(e){case"1":return f;case"2":return b;case"3":return v;default:return f}}(n)),r.a.createElement(tn,{width:300,style:{padding:"25px"}},r.a.createElement("div",{style:{fontWeight:"bolder",paddingBottom:"15px",fontSize:"medium"}},"Pending Donations"),r.a.createElement("div",null,0===this.props.userType.localeCompare("donor")?g:h))),r.a.createElement(C.a,{visible:o,title:"Accept Donation",onOk:this.handleOk,onCancel:this.handleCancel,footer:[r.a.createElement(R.a,{key:"back",onClick:this.handleCancel},"Say Thanks"),r.a.createElement(R.a,{key:"submit",type:"primary",loading:i,onClick:this.handleOk},"Share Donation")]},r.a.createElement("b",null," Enter No of people will be fed from this donation ?"),r.a.createElement(ee.a,{placeholder:"Input Number Here"}),r.a.createElement("b",null," Rate the User"),r.a.createElement(ee.a,{placeholder:"Rate Between 1 to 5"})))}}]),a}(n.Component),rn=Object(m.b)((function(e){return{pendingDonorDonation:e.DiscoverReducer.Donations.filter((function(t){var a=e.authReducer.user.userId;return 0==t.status.localeCompare("pending")&&t.donorId==a})),userType:e.authReducer.user.userType,currentfilter:e.DiscoverReducer.currentfilter,Donations:e.DiscoverReducer.Donations.filter((function(e){return 0===e.status.localeCompare("NotAccepted")})),pendingDonations:e.DiscoverReducer.Donations.filter((function(t){var a=e.authReducer.user.userId;return 0==t.status.localeCompare("pending")&&t.receiverId==a})),Organisations:e.DiscoverReducer.Organisations,Events:e.DiscoverReducer.Events}}),(function(e,t){return{getOrganisation:Object(f.bindActionCreators)(Ka,e),acceptdonation:Object(f.bindActionCreators)(me,e),changeFilters:Object(f.bindActionCreators)(Xa,e),pendingDonation:Object(f.bindActionCreators)(Qa,e),rejectDonation:Object(f.bindActionCreators)(we,e),getDonation:Object(f.bindActionCreators)(Ja,e),setCurrentRoute:Object(f.bindActionCreators)(z,e)}}))(nn),on=a(603),sn=a(176),cn=a(632),ln=a(305),un=Object(m.b)((function(e){return{auth:e.authReducer}}))((function(e){var t=e.component,a=e.auth,n=e.my,o=Object(ln.a)(e,["component","auth","my"]);return r.a.createElement(c.b,Object.assign({},o,{render:function(e){return!0===a.isAuthenticated?!0===n?r.a.createElement(t,Object.assign({key:"my"},e)):r.a.createElement(t,Object.assign({key:Math.random()},e)):r.a.createElement(c.a,{to:"/login"})}}))})),pn=(a(602),a(597)),dn=a(630),mn=a(631),fn=a(154),hn=a.n(fn),gn=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).onChange=function(t){console.log("radio checked",t.target.value),e.setState({value:t.target.value})},e.openNotificationWithIcon=function(e,t){on.a[e]({message:t})},e.onSubmit=function(){var t=Object(b.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(a),a.password==a.password2){t.next=5;break}e.openNotificationWithIcon("warning","Passwords are not matching"),t.next=19;break;case 5:if(e.state.latlng){t.next=9;break}e.openNotificationWithIcon("warning","Please enter your location"),t.next=19;break;case 9:if("organisation"!=a.userType||0!=e.state.certificates.length){t.next=13;break}e.openNotificationWithIcon("warning","Please upload the certificates"),t.next=19;break;case 13:return console.log("everythhing okay",Object(Ot.a)(Object(Ot.a)({},a),{},{location:e.state.latlng})),console.log(e.state.certificates,a.userType),e.setState({loading:!0}),t.next=18,e.props.registerUser(Object(Ot.a)(Object(Ot.a)({},a),{},{certificates:e.state.certificates,location:{type:"Point",coordinates:[e.state.latlng.lng,e.state.latlng.lat]}}),e.props.history);case 18:e.setState({loading:!1});case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveLatLng=function(t){e.setState({latlng:t})},e.state={errors:{},value:1,mapOpen:!1,latlng:null,certificates:[],loading:!1},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/home")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this,t={display:"block",height:"30px",lineHeight:"30px"},a=this.state,n=(a.errors,a.value);return r.a.createElement("div",{style:{paddingTop:"20px",height:"100vh",display:"flex",justifyContent:"center"}},r.a.createElement(Z.a,{layout:"vertical",style:{width:"500px"},onFinish:this.onSubmit},r.a.createElement(Z.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name!"}]},r.a.createElement(ee.a,{prefix:r.a.createElement(G.a,{className:"site-form-item-icon"})})),r.a.createElement(Z.a.Item,{label:"Email",name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your email!"}]},r.a.createElement(ee.a,{prefix:r.a.createElement(dn.a,{className:"site-form-item-icon"})})),r.a.createElement(Z.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(ee.a.Password,{prefix:r.a.createElement(mn.a,{className:"site-form-item-icon"})})),r.a.createElement(Z.a.Item,{label:"Confirm Password",name:"password2",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(ee.a.Password,{prefix:r.a.createElement(mn.a,{className:"site-form-item-icon"})})),r.a.createElement(ee.a,{placeholder:"Location",disabled:!0,value:this.state.latlng?this.state.latlng.lat+" , "+this.state.latlng.lng:"",style:{width:300,marginBottom:"10px"}}),r.a.createElement(R.a,{onClick:function(){return e.setState({mapOpen:!0})},icon:r.a.createElement(ia.a,null)})," ",r.a.createElement("br",null),r.a.createElement(Z.a.Item,{label:"Contact",name:"contact",rules:[{required:!0,message:"Please input your contact!"}]},r.a.createElement(ee.a,{prefix:r.a.createElement(Ta.a,{className:"site-form-item-icon"})})),r.a.createElement(Z.a.Item,{label:"Address",name:"address",rules:[{required:!0,message:"Please input your address!"}]},r.a.createElement(ee.a.TextArea,null)),r.a.createElement(Z.a.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Please input a brief description!"}]},r.a.createElement(ee.a.TextArea,null)),r.a.createElement(Z.a.Item,{label:"Choose User type",name:"userType",rules:[{required:!0,message:"Please Choose user type"}]},r.a.createElement(pn.a.Group,{onChange:this.onChange,value:n},r.a.createElement(pn.a,{style:t,value:"donor"},"Donor"),r.a.createElement(pn.a,{style:t,value:"organisation"},"Organisation",r.a.createElement("br",null),"organisation"===n?r.a.createElement("div",{style:{marginLeft:25}},r.a.createElement(te.a,{multiple:!1,name:"file",accept:"application/pdf",customRequest:function(){var t=Object(b.a)(g.a.mark((function t(a){var n,r,o,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.file,r=a.onSuccess,o=a.onError,(i=new FormData).append("file",n),t.next=5,y.a.post("/upload/certificates",i).then((function(t){e.setState({certificates:[].concat(Object(St.a)(e.state.certificates),[t.data.location])}),r(t.data)})).catch((function(e){console.log("error in uploading"),o("Error in uploading. Try again")}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRemove:function(t){var a=t.response.location,n=e.state.certificates.filter((function(e){return e!=a}));e.setState({certificates:n})}},r.a.createElement("p",null,"Please upload Government issued certificate for your Organisation(in pdf format)"),r.a.createElement(R.a,{icon:r.a.createElement(Ma.a,null)},"Upload certificates"))):null))),r.a.createElement(Z.a.Item,null,r.a.createElement(R.a,{type:"primary",htmlType:"submit"},"Register")," ","Or ",r.a.createElement(H.b,{to:"/login"},"Login now!"))),r.a.createElement(hn.a,{footer:[r.a.createElement(R.a,{onClick:function(){return e.setState({mapOpen:!1})}},"Return")],centered:!0,closable:!1,width:"90vw",visible:this.state.mapOpen},r.a.createElement(fa,{saveLatLng:this.saveLatLng})))}}]),a}(n.Component),bn=Object(m.b)((function(e){return{auth:e.authReducer,errors:e.authReducer.errors}}),(function(e){return{registerUser:Object(f.bindActionCreators)($t,e)}}))(Object(c.g)(gn)),vn=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).onSubmit=function(){var t=Object(b.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,e.props.loginUser(a);case 3:e.setState({loading:!1});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={errors:{},loading:!1},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/home")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/home"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){this.state.errors;return r.a.createElement("div",{style:{paddingTop:"200px",height:"100vh",display:"flex",justifyContent:"center"}},r.a.createElement(Z.a,{layout:"vertical",style:{width:"500px"},onFinish:this.onSubmit},r.a.createElement(Z.a.Item,{label:"Email",name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your email!"}]},r.a.createElement(ee.a,{prefix:r.a.createElement(dn.a,{className:"site-form-item-icon"})})),r.a.createElement(Z.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(ee.a.Password,{prefix:r.a.createElement(mn.a,{className:"site-form-item-icon"})})),r.a.createElement(Z.a.Item,null,r.a.createElement(R.a,{loading:this.state.loading,type:"primary",htmlType:"submit"},"Log in")," ","Or ",r.a.createElement(H.b,{to:"/register"},"Register now!"))))}}]),a}(n.Component),En=Object(m.b)((function(e){return{auth:e.authReducer,errors:e.authReducer.errors}}),(function(e){return{loginUser:Object(f.bindActionCreators)(Zt,e)}}))(vn),yn=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/home")}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement("div",{style:{marginTop:"40vh",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"}},r.a.createElement("p",null,"WELCOME"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(R.a,{type:"primary"},r.a.createElement(H.b,{to:"/login"},"LOGIN")),r.a.createElement(R.a,{style:{marginLeft:"8px"}},r.a.createElement(H.b,{to:"/register"},"REGISTER")))))}}]),a}(n.Component),On=Object(m.b)((function(e){return{auth:e.authReducer}}))(yn),kn=function(){return r.a.createElement("div",{style:{height:"100vh",paddingTop:"40vh",fontSize:"30px",textAlign:"center"}},"Coming Soon!")},jn=a(122);var wn=function(e){var t=e.message,a=e.currentUser,n=e.you,o=t.sender,i=t.time,s=t.body,c=t.type;return r.a.createElement("div",{style:{width:"100%",paddingLeft:"10px"}},r.a.createElement(Se.a,{author:o===(null===n||void 0===n?void 0:n._id)?n.name:a.name,avatar:r.a.createElement(T.a,{src:o===(null===n||void 0===n?void 0:n._id)?n.avatar:a.avatar,alt:o===(null===n||void 0===n?void 0:n._id)?n.name:a.name}),content:"image"===c?r.a.createElement(V.a,{width:200,src:s,alt:"image"}):r.a.createElement("p",null,s),datetime:r.a.createElement(jn.a,{title:oe()().format("YYYY-MM-DD HH:mm:ss")},r.a.createElement("span",null,oe()(i).fromNow()))}))},Cn=a(300),xn=(a(581),w.a.Content),Dn=w.a.Sider,Tn=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={chatMessage:"",currentThread:{},currentUser:{},you:{},requiredUser:null,loading:!1},e.openNotificationWithIcon=function(e,t){on.a[e]({message:t})},e.hanleSearchChange=function(t){e.setState({chatMessage:t.target.value})},e.renderCards=function(){return e.state.currentThread.messages&&e.state.currentThread.messages.map((function(t){return r.a.createElement(wn,{key:t._id,message:t,currentUser:e.state.currentUser,you:e.state.you})}))},e.onDrop=function(t){console.log(t);var a=new FormData;a.append("file",t[0]),y.a.post("upload/messages",a,{header:{"content-type":"multipart/form-data"}}).then((function(t){if(t.data.success){var a,n=t.data.location,r=null===(a=e.state.currentThread)||void 0===a?void 0:a._id;r?e.props.sendMessage(r,n,"image"):e.openNotificationWithIcon("warning","Please select a user to send the message")}}))},e.submitChatMessage=function(t){var a;t.preventDefault();var n=e.state.chatMessage,r=null===(a=e.state.currentThread)||void 0===a?void 0:a._id;r?(e.props.sendMessage(r,n,"text"),e.setState({chatMessage:""})):e.openNotificationWithIcon("warning","Please select a user to send the message")},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),this.props.location.state&&(console.log("from user",this.props.location.state.user),this.setState({requiredUser:this.props.location.state.user})),e.next=4,this.props.getThreads();case 4:this.setState({loading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.messagesEnd&&this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"componentWillReceiveProps",value:function(e){var t,a=this;console.log("nextProps",e);var n=null===(t=this.state.currentThread)||void 0===t?void 0:t._id;if(n){var r=e.threads.find((function(e){return e._id==n}));r&&this.setState({currentThread:r})}else if(this.state.requiredUser){var o=e.threads.find((function(e){return!!(null===e||void 0===e?void 0:e.members.find((function(e){return e._id==a.state.requiredUser})))}));if(o){var i=o.members.find((function(e){return e._id!=a.props.user.userId})),s=o.members.find((function(e){return e._id==a.props.user.userId}));console.log("okayy the required user",o),this.setState({currentThread:o,requiredUser:null,currentUser:i,you:s})}else console.log("not there, maybe new user"),this.props.startThread(this.state.requiredUser)}}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.loading?r.a.createElement(Fa,null):r.a.createElement(w.a,{style:{paddingTop:"64px",paddingLeft:"24px"}},r.a.createElement(w.a,{style:{}},r.a.createElement(Dn,{width:300,className:"site-layout-background"},r.a.createElement(x.b,{style:{paddingLeft:"10px"},itemLayout:"horizontal",dataSource:this.props.threads,renderItem:function(t){var a=t.members.find((function(t){return t._id!=e.props.user.userId})),n=t.members.find((function(t){return t._id==e.props.user.userId}));return r.a.createElement(x.b.Item,{key:t._id,onClick:function(){return e.setState({currentThread:t,currentUser:a,you:n})}},r.a.createElement(x.b.Item.Meta,{avatar:r.a.createElement(T.a,{src:a.avatar}),title:a.name,description:t.messages.length?"text"==t.messages[t.messages.length-1].type?t.messages[t.messages.length-1].body:"Image":""}))}})),r.a.createElement(w.a,{style:{padding:"0 24px 24px"}},r.a.createElement(xn,{style:{margin:0}},r.a.createElement("div",{class:"site-layout-background",style:{paddingLeft:"0px",maxWidth:"860px"}},r.a.createElement("div",{className:"infinite-container",style:{height:"570px",overflowY:"scroll"}},this.state.currentThread&&this.renderCards(),r.a.createElement("div",{ref:function(t){e.messagesEnd=t},style:{float:"left",clear:"both",paddingLeft:"30px"}})),r.a.createElement(ra.a,{gutter:12},r.a.createElement(Z.a,{style:{width:"100%",marginTop:"10px",marginBottom:"12px",marginLeft:"10px"},layout:"inline",onSubmit:this.submitChatMessage},r.a.createElement(oa.a,{span:18},r.a.createElement(ee.a,{id:"message",prefix:r.a.createElement(et.a,null),placeholder:"Let's start talking",type:"text",value:this.state.chatMessage,onChange:this.hanleSearchChange})),r.a.createElement(oa.a,{span:2},r.a.createElement(Cn.a,{onDrop:this.onDrop},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("section",null,r.a.createElement("div",t(),r.a.createElement("input",a()),r.a.createElement(R.a,{style:{width:"100%"}},r.a.createElement(Ma.a,null))))}))),r.a.createElement(oa.a,{span:3},r.a.createElement(R.a,{type:"primary",style:{width:"100%"},onClick:this.submitChatMessage,htmlType:"submit"},r.a.createElement(Aa.a,null)))))))))))}}]),a}(n.Component),Sn=Object(m.b)((function(e){return{threads:e.messageReducer.threads,user:e.authReducer.user}}),(function(e){return{getThreads:Object(f.bindActionCreators)(dt,e),startThread:Object(f.bindActionCreators)(ht,e),sendMessage:Object(f.bindActionCreators)(ft,e),updateThread:Object(f.bindActionCreators)(mt,e)}}))(Tn);if(localStorage.jwtToken){var An=localStorage.jwtToken;at(An);var Rn=Object(nt.a)(An);Kt.dispatch(ea(Rn)),console.log("the main guyYYY");var In=Date.now()/1e3;Rn.exp<In&&(Kt.dispatch(ta()),window.location.href="./login"),Qt()}var Pn=Object(m.b)((function(e){return{errors:e.authReducer.errors}}),(function(e){return{clearErrors:Object(f.bindActionCreators)(aa,e)}}))((function(e){var t=r.a.useState(),a=Object(s.a)(t,2),o=a[0],i=a[1],l=Object(sn.useThemeSwitcher)(),u=l.switcher,p=l.status,d=l.themes;return Object(n.useEffect)((function(){var t,a,n;(null===(t=e.errors)||void 0===t?void 0:t.message)&&(a="error",n=e.errors.message,on.a[a]({message:n}),e.clearErrors())}),[e.errors]),"loading"===p?null:r.a.createElement(w.a,null,r.a.createElement(wa,null),r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/",component:On}),r.a.createElement(c.b,{exact:!0,path:"/register",component:bn}),r.a.createElement(c.b,{exact:!0,path:"/login",component:En}),r.a.createElement(c.d,null,r.a.createElement(un,{exact:!0,path:"/home",component:Xe}),r.a.createElement(un,{exact:!0,path:"/i/profile/:id",component:Ya,my:!0}),r.a.createElement(un,{exact:!0,path:"/profile/:id",component:Ya}),r.a.createElement(un,{exact:!0,path:"/discover",component:rn}),r.a.createElement(un,{exact:!0,path:"/messages",component:Sn}),r.a.createElement(c.b,{path:"/",component:kn}))),r.a.createElement(R.a,{shape:"circle",size:"large",icon:r.a.createElement(cn.a,{style:o?{color:"#F0C315"}:{color:"#444"}}),style:{position:"fixed",right:"16px",bottom:"16px"},onClick:function(){return i(e=!o),void u({theme:e?d.dark:d.light});var e}}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Nn=a(297),Ln={dark:"".concat("","/dark-theme.css"),light:"".concat("","/light-theme.css")};i.a.render(r.a.createElement(m.a,{store:Kt},r.a.createElement(H.a,null,r.a.createElement(Nn.a,{persistor:Jt},r.a.createElement(sn.ThemeSwitcherProvider,{themeMap:Ln,defaultTheme:"light"},r.a.createElement(Pn,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[306,1,2]]]);
//# sourceMappingURL=main.3c843986.chunk.js.map