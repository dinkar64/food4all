(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{141:function(e,t,a){},305:function(e,t,a){e.exports=a(582)},314:function(e,t,a){},349:function(e,t,a){},350:function(e,t,a){},467:function(e,t,a){},493:function(e,t){},499:function(e,t,a){},510:function(e,t,a){},549:function(e,t,a){},581:function(e,t,a){},582:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(30),i=a.n(o),l=(a(141),a(300)),c=a(52),s=(a(77),a(39)),u=a(40),p=a(42),d=a(41),m=a(37),f=a(11),h=a(613),g=a(614),b=a(584),v=a(592),E=a(590),y=a(599),O=a(596),w=a(601),k=a(586),j=a(70),x=(a(314),a(8)),C=a.n(x),D=a(13),S="GET_SOME_DATA",T=a(22),R=a.n(T),A=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.a.get("/some-api-route");case 2:a({type:S,payload:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},I=a(43),P=a(595),L=a(598),N=a(604),_="SET_CURRENT_ROUTE",M=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:_,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F="CHANGE_FILTERS",G="GET_LEFT_DETAILS",H=function(){return function(){var e=Object(D.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.a.get("/api/users/left-details");case 3:a=e.sent,t({type:G,payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"GET_ERRORS",payload:e.t0.response.data});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:F,selectedfilters:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},z=b.a.Sider,q=P.a.SubMenu,W=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.getLeftDetails()}},{key:"render",value:function(){var e=this,t=this.props.profileDetails,a=t.following,n=t.followers,o=t.achievements,i=t.donations,l=t.name,c=t.avatar,s=n.length?n.map((function(t){return r.a.createElement(I.b,{onClick:function(){return e.props.setCurrentRoute("profile")},to:"/profile/".concat(t._id)},r.a.createElement(P.a.Item,{key:t._id,style:{paddingLeft:"36px",marginBottom:"10px"}},r.a.createElement(O.a,{size:25,src:t.avatar,style:{backgroundColor:"#87d068",marginRight:"4px"}}),t.name))})):r.a.createElement(P.a.Item,{key:"1"}," No followers yet! "),u=a.length?a.map((function(t){return r.a.createElement(I.b,{onClick:function(){return e.props.setCurrentRoute("profile")},to:"/profile/".concat(t._id)},r.a.createElement(P.a.Item,{key:t._id,style:{paddingLeft:"36px",marginBottom:"10px"}},r.a.createElement(O.a,{size:25,src:t.avatar,style:{backgroundColor:"#87d068",marginRight:"4px"}}),t.name))})):r.a.createElement(P.a.Item,{key:"1"}," You are not following anyone! "),p=(null===i||void 0===i?void 0:i.length)?i.map((function(e){return console.log("inside the donation list",e),r.a.createElement(P.a.Item,{key:e._id},e.title)})):r.a.createElement(P.a.Item,{key:"1"}," No donations yet! ");(null===o||void 0===o?void 0:o.length)?o.map((function(e){return r.a.createElement(P.a.Item,{key:e.id},e.title)})):P.a.Item;return r.a.createElement(z,{width:280,className:"site-layout-background",style:{overflow:"auto",height:"100vh",position:"fixed",left:0,marginTop:"40px"}},r.a.createElement(P.a,{mode:"inline",defaultOpenKeys:["sub5"],style:{height:"100%",borderRight:0,paddingTop:"40px"}},r.a.createElement(P.a.Item,{key:"Sub1",style:{fontSize:"16px",marginBlock:"10px"}},r.a.createElement(I.b,{to:"/profile/".concat(this.props.profileDetails._id)}),r.a.createElement(w.b,null,r.a.createElement(O.a,{size:36,src:c,style:{backgroundColor:"#87d068"},icon:r.a.createElement(N.a,null)}),l)),r.a.createElement(q,{key:"sub2",title:"Followers",style:{fontSize:"16px"}},s),r.a.createElement(q,{key:"sub3",title:"Following",style:{fontSize:"16px"}},u),r.a.createElement(q,{key:"sub4",title:"Recent Donations",style:{fontSize:"16px"}},p),r.a.createElement(q,{key:"sub6",title:"Filters",style:{fontSize:"16px"}},r.a.createElement("div",{style:{padding:"auto"}},r.a.createElement(L.a.Group,{options:[{label:"Donations",value:"Donations"},{label:"Events",value:"Events"},{label:"Posts",value:"Posts"}],onChange:function(t){e.props.changeFilters(t)}})))))}}]),a}(n.Component),V=Object(m.b)((function(e){return{profileDetails:e.LeftSidePanelReducer.profileDetails}}),(function(e){return{changeFilters:Object(f.bindActionCreators)(U,e),getLeftDetails:Object(f.bindActionCreators)(H,e),setCurrentRoute:Object(f.bindActionCreators)(M,e)}}))(W),B=(a(349),a(594)),Y=a(607),K=a(608),X=a(609),J=a(610),$=a(611),Q=a(612),Z=function(){return function(){var e=Object(D.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("/api/posts/");case 2:a=e.sent,t({type:"GET_POST",payload:a.data.posts,allcomments:a.data.allcomments,avatars:a.data.avatars});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ee=function(e,t){return function(){var a=Object(D.a)(C.a.mark((function a(n){return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=5;break}return a.next=3,R.a.post("/api/posts/like",{id:e,value:-1});case 3:a.next=7;break;case 5:return a.next=7,R.a.post("/api/posts/like",{id:e,value:1});case 7:n({type:"CHANGE_LIKE",id:e,value:t});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},te=a(48),ae=a.n(te),ne=a(591),re=a(593),oe=a(589),ie=a(605),le=(a(350),function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.a.post("/api/posts/create",{post:e});case 2:n=t.sent,a({type:"ADD_POST",post:n.data.post,comment:n.data.comment});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),ce="GET_SOME_DATA",se="GET_SUGGESTED_PAGES",ue="CHANGE_TAB",pe="GET_PROFILE",de="UPDATE_PROFILE_PIC",me="GET_FOLLOWERS",fe="GET_FOLLOWING",he=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.a.post("../../api/donation/accept",{_id:e._id});case 2:a({type:"ACCEPT_DONATION",payload:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ge=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.a.get("/some-api-route");case 2:a({type:ce,payload:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},be=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.a.post("/api/users/addhistory",{history:e});case 2:n=t.sent,a({type:"ADD_HISTORY",payload:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ve=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.a.get("/api/users/profile/".concat(e));case 3:n=t.sent,a({type:pe,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Ee=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.a.post("/api/users/addfed",{value:e});case 2:n=t.sent,a({type:"ADD_FED",payload:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ye=function(){return function(){var e=Object(D.a)(C.a.mark((function e(t,a){var n,r,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a().authReducer.user.userId,r=function(e){return 0==e.status.localeCompare("pending")&&e.receiverId==n},o=a().DiscoverReducer.Donations.filter(r),t({type:"GET_PENDING_DONATION",payload:o});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},Oe=function(e){return function(t){t({type:ue,payload:e})}},we=function(e,t){return function(a){a({type:de,payload:{profilePic:e,avatar:t}})}},ke=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.a.get("/api/users/follow/".concat(e));case 3:n=t.sent,a({type:pe,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},je=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.a.get("/api/users/unfollow/".concat(e));case 3:n=t.sent,a({type:pe,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},xe=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.a.get("/api/users/followers/".concat(e));case 3:n=t.sent,a({type:me,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Ce=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.a.get("/api/users/following/".concat(e));case 3:n=t.sent,a({type:fe,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},De=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.a.post("api/donation/reject",{_id:e});case 3:n=t.sent,console.log(n.data),a({type:"REJECT_DONATION",id:e}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Se=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.a.post("/api/users/edit-profile",{user:e});case 3:n=t.sent,a({type:pe,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Te=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},Re=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:e.props.name,description:"",files:[]},e.addpost=function(t){e.props.handleOk();var a=t.dragger,n=null===a||void 0===a?void 0:a.map((function(e){return e.response.location})),r={author:e.state.user,description:t.description,likes:[],liked:!1,noOfLikes:0,DateTime:ae()().format("HH:mm ll"),imageUrl:n};e.props.addPost(r);var o={color:"blue",icon:"dot",text:r.description+" ( Posted on "+r.DateTime+" )"};e.props.addHistory(o)},e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(v.a,{visible:this.props.visible,maskClosable:!1,destroyOnClose:!0,title:"Share your Thoughts",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(j.a,{key:"back",onClick:this.props.handleCancel},"Return"),r.a.createElement(j.a,{form:"post-form",key:"submit",type:"primary",htmlType:"submit",loading:this.props.loading},"Post")]},r.a.createElement(ne.a,{id:"post-form",name:"validate_other",layout:"Vertical",onFinish:this.addpost},r.a.createElement(ne.a.Item,{name:"description",width:500,rules:[{required:!0,message:"Please Enter Items details"}]},r.a.createElement(re.a.TextArea,{placeholder:"Express your thoughts",autoSize:{minRows:2,maxRows:6}})),r.a.createElement(ne.a.Item,{name:"dragger",valuePropName:"fileList",getValueFromEvent:Te,noStyle:!0},r.a.createElement(oe.a.Dragger,{multiple:!1,name:"file",customRequest:function(){var e=Object(D.a)(C.a.mark((function e(t){var a,n,r,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.file,n=t.onSuccess,r=t.onError,(o=new FormData).append("file",a),e.next=5,R.a.post("/upload/posts",o).then((function(e){n(e.data)})).catch((function(e){console.log("error in uploading"),r("Error in uploading.Try again")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(ie.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),r.a.createElement("p",{className:"ant-upload-hint"},"Support for a single or bulk upload.")))))}}]),a}(n.Component),Ae=Object(m.b)((function(e){return{name:e.LeftSidePanelReducer.profileDetails.name}}),(function(e){return{addHistory:Object(f.bindActionCreators)(be,e),addPost:Object(f.bindActionCreators)(le,e)}}))(Re),Ie=a(585),Pe=function(e,t){return function(){var a=Object(D.a)(C.a.mark((function a(n){return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e,a.next=3,R.a.post("/api/comment/add/".concat(e),{content:t.content});case 3:n({type:"ADD_COMMENT",id:e,comment:t});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Le=re.a.TextArea,Ne=function(e){var t=e.comments;return r.a.createElement(E.b,{dataSource:t,header:"".concat(t.length," ").concat(t.length>1?"replies":"reply"),itemLayout:"horizontal",renderItem:function(e){return r.a.createElement(Ie.a,e)}})},_e=function(e){var t=e.onChange,a=e.onSubmit,n=e.submitting,o=e.value;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a.Item,null,r.a.createElement(Le,{rows:2,onChange:t,value:o})),r.a.createElement(ne.a.Item,null,r.a.createElement(j.a,{htmlType:"submit",loading:n,onClick:a,type:"primary"},"Add Comment")))},Me=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={submitting:!1,value:""},e.handleSubmit=function(t){if(e.state.value){var a=e.state.value;e.setState({submitting:!0}),setTimeout((function(){var t={author:"Arpit Bandjiya",avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:a,datetime:ae()().fromNow()};e.props.addComment(e.props.id,t)}),1e3),e.setState({submitting:!1,value:""})}},e.handleChange=function(t){e.setState({value:t.target.value})},e}return Object(u.a)(a,[{key:"render",value:function(){if(this.props.id){var e=this.state,t=e.submitting,a=e.value,n=this.props.postComments[0].comments;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{visible:this.props.visible,title:"Comments",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(j.a,{key:"back",onClick:this.props.handleCancel},"Return"),r.a.createElement(j.a,{key:"submit",type:"primary",loading:this.props.loading,onClick:this.props.handleOk},"DOne")]},n.length>0&&r.a.createElement(Ne,{comments:n}),r.a.createElement(Ie.a,{avatar:r.a.createElement(O.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",alt:"Han Solo"}),content:r.a.createElement(_e,{onChange:this.handleChange,onSubmit:this.handleSubmit,submitting:t,value:a})})))}return null}}]),a}(r.a.Component),Fe=Object(m.b)((function(e,t){var a=t.id;return{postComments:e.HomeCenterReducer.postComments.filter((function(e){return e.postId===a}))}}),(function(e){return{addComment:Object(f.bindActionCreators)(Pe,e)}}))(Me),Ge=a(606);function He(){return r.a.createElement("div",{style:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"50px"}},r.a.createElement(Ge.a,null))}var Ue=b.a.Content,ze=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,visible:!1,loadingComments:!1,visibleComments:!1,currentPostid:null,profilePageLoading:!1},e.showModal=function(){e.setState({visible:!0})},e.startModalComments=function(){var t=Object(D.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({currentPostid:a});case 2:e.setState({visibleComments:!0});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showModalComments=function(){e.setState({visibleComments:!0})},e.handleOk=function(){e.setState({loading:!0}),setTimeout((function(){e.setState({loading:!1,visible:!1})}),500),v.a.success({content:"Post Shared"})},e.handleOkComments=function(){e.setState({loadingComments:!0}),setTimeout((function(){e.setState({loadingComments:!1,visibleComments:!1})}),100)},e.handleCancel=function(){e.setState({visible:!1})},e.handleCancelComments=function(){e.setState({visibleComments:!1})},e.incrementLike=function(t,a){e.props.changelike(t,a)},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(D.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({profilePageLoading:!0}),e.next=3,this.props.getPost();case 3:this.setState({profilePageLoading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.loading,o=t.visibleComments,i=t.loadingComments,l=this.props.posts,c=l.length?l.map((function(t){return r.a.createElement(y.a,{title:r.a.createElement(I.b,{onClick:function(){return e.props.setCurrentRoute("profile")},to:"/profile/".concat(t.authorId._id)},r.a.createElement(O.a,{src:t.authorId.avatar,alt:"Han Solo",style:{margin:"8px"}}),t.author),extra:t.DateTime,style:{width:700,margin:"8px"},actions:[r.a.createElement("div",{onClick:function(a){return e.incrementLike(t._id,t.liked)}},(n=t.liked,n?r.a.createElement(Y.a,{key:"Like",style:{margin:"8px"}}):r.a.createElement(K.a,{key:"Like",style:{margin:"8px"}})),t.noOfLikes),r.a.createElement("div",null,r.a.createElement(X.a,{key:"share",style:{margin:"8px"}})," "),r.a.createElement("div",null,r.a.createElement(J.a,{hoverable:!0,onClick:function(){return e.startModalComments(t._id)},key:"Comment",style:{margin:"8px"}})," "),r.a.createElement("div",null,r.a.createElement($.a,{key:"Award",style:{margin:"8px"}})," ")]},r.a.createElement("p",null,t.description),r.a.createElement(w.b,null,void 0==(a=t.imageUrl)?r.a.createElement("div",null,"No images!"):a.length?a.map((function(e){return r.a.createElement(B.a,{width:100,height:100,alt:"example",src:e})})):r.a.createElement("div",null,"No images!")));var a,n})):r.a.createElement("div",null," No post are here! ");return this.state.profilePageLoading?r.a.createElement(He,null):r.a.createElement(Ue,{style:{margin:"auto"}},r.a.createElement(y.a,{style:{width:700,margin:"8px"},hoverable:!0,onClick:this.showModal},r.a.createElement("p",{className:"cardtext"}," ",r.a.createElement(Q.a,null)," Share something with the community")),r.a.createElement(Ae,{handleCancel:this.handleCancel,handleOk:this.handleOk,showModal:this.showModal,visible:a,loading:n}),r.a.createElement(Fe,{id:this.state.currentPostid,handleCancel:this.handleCancelComments,handleOk:this.handleOkComments,showModal:this.showModalComments,visible:o,loading:i}),c)}}]),a}(n.Component),qe=Object(m.b)((function(e){return{posts:e.HomeCenterReducer.posts}}),(function(e){return{changelike:Object(f.bindActionCreators)(ee,e),getPost:Object(f.bindActionCreators)(Z,e),setCurrentRoute:Object(f.bindActionCreators)(M,e)}}))(ze),We=b.a.Sider;function Ve(){v.a.info({title:"Coming soon",onOk:function(){}})}function Be(){v.a.info({title:"Food4all",content:r.a.createElement("div",null,r.a.createElement("p",null,"A new community-led platform to highlight local food security programs and connect donors to them, making the process convenient.")),onOk:function(){}})}function Ye(){v.a.info({title:"Please refer to Documentation",onOk:function(){}})}function Ke(){v.a.info({title:"Reach out to us at any of the below email address :",content:r.a.createElement("div",null,r.a.createElement("p",null,"Dinkar     - cs18b010@iittp.ac.in"),r.a.createElement("p",null,"Arpit      - cs18b003@iittp.ac.in"),r.a.createElement("p",null,"Sudheesh    - cs18b020@iittp.ac.in"),r.a.createElement("p",null,"Shreyansh  - cs18b042@iittp.ac.in")),onOk:function(){}})}var Xe,Je=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={someStateVariable:"hi"},n}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement(V,null),r.a.createElement(b.a,{style:{marginTop:"64px"}},r.a.createElement(qe,null)),r.a.createElement(We,{width:300,style:{padding:"25px",marginTop:"48px",right:0,position:"fixed",height:"100vh"}},r.a.createElement(E.b,{itemLayout:"horizontal",header:r.a.createElement("div",{style:{fontWeight:"bolder",padding:"5px",fontSize:"medium"}},"Saved events"),renderItem:function(e){return r.a.createElement(E.b.Item,null,r.a.createElement(E.b.Item.Meta,null))}}),r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement(y.a,{size:"small",style:{width:200,marginLeft:25},bodyStyle:{color:"#97033e",fontWeight:"bold"},bordered:!1,actions:[r.a.createElement("p",{onClick:Ve},r.a.createElement(h.a,{hoverable:!0,key:"learnMoreAwards"})," Learn more "),r.a.createElement("p",{onClick:Ve},r.a.createElement(g.a,{hoverable:!0,key:"buyAwards"})," Buy now! ")]},r.a.createElement("p",null,r.a.createElement(O.a.Group,null,r.a.createElement(O.a,{size:"small",src:"https://www.clipartmax.com/png/small/119-1190442_shield-batch-star-safe-badge-sheriff-police-icon-badge.png"}),r.a.createElement(O.a,{size:"large",src:"https://www.clipartmax.com/png/small/216-2160288_shield-badge-star-reward-award-honor-achievement-comments-sheriff-shield.png"}),r.a.createElement(O.a,{size:64,src:"https://www.clipartmax.com/png/small/155-1553987_all-finishers-will-receive-a-custom-medal-award-icon.png"}),r.a.createElement(O.a,{size:"large",src:"https://www.clipartmax.com/png/small/216-2160288_shield-badge-star-reward-award-honor-achievement-comments-sheriff-shield.png"}),r.a.createElement(O.a,{size:"small",src:"https://www.clipartmax.com/png/small/119-1190442_shield-batch-star-safe-badge-sheriff-police-icon-badge.png"})),"NofoodWasted awards are the best way to show your appreciation for work of other users!"))),r.a.createElement("div",{style:{marginTop:"64px",marginLeft:0}},r.a.createElement(w.b,{split:r.a.createElement(k.a,{type:"vertical",style:{color:"black",paddingLeft:"5px"}})},r.a.createElement(j.a,{onClick:Be,type:"link"},"About"),r.a.createElement(j.a,{onClick:Ye,type:"link"},"Help"),r.a.createElement(j.a,{onClick:Ke,type:"link"},"Contact us")))))}}]),a}(n.Component),$e=Object(m.b)((function(e){return{someData:e.homeReducer.someData}}),(function(e){return{getSomeData:Object(f.bindActionCreators)(A,e)}}))(Je),Qe=a(616),Ze=a(617),et=a(618),tt=a(619),at=a(620),nt=a(621),rt=a(622),ot=(a(467),function(e){e?R.a.defaults.headers.common.Authorization=e:delete R.a.defaults.headers.common.Authorization}),it=a(169),lt="GET_ERRORS",ct="USER_LOADING",st="SET_CURRENT_USER",ut="CLEAR_ERRORS",pt=a(288),dt=a.n(pt),mt="GET_THREADS",ft="UPDATE_THREAD",ht=function(){return function(){var e=Object(D.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.a.get("/api/message/getThreads");case 3:a=e.sent,t({type:mt,payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"GET_ERRORS",payload:e.t0.response.data});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},gt=function(e){return function(t){t({type:ft,payload:e})}},bt=function(e,t,a){return function(){var n=Object(D.a)(C.a.mark((function n(r){var o;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,R.a.post("/api/message/send",{threadId:e,body:t,type:a});case 3:o=n.sent,r({type:ft,payload:o.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r({type:"GET_ERRORS",payload:n.t0.response.data});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},vt=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.a.post("/api/message/new-thread",{receiver:e});case 3:n=t.sent,a({type:ft,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Et=a(289),yt=a(290),Ot=a(212),wt=a(291),kt=a.n(wt),jt=a(9),xt={someData:"initilProp"},Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:e=Object(jt.a)(Object(jt.a)({},e),{},{someData:t.payload})}return e},Dt={currentRoute:"home"},St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:e=Object(jt.a)(Object(jt.a)({},e),{},{currentRoute:t.payload});break;case"LOGOUT":e=Object(jt.a)({},Dt)}return e},Tt=a(498),Rt={isAuthenticated:!1,user:{},loading:!1,errors:{}},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case st:return Object(jt.a)(Object(jt.a)({},e),{},{isAuthenticated:!Tt(t.payload),user:t.payload});case ct:return Object(jt.a)(Object(jt.a)({},e),{},{loading:!0});case lt:return Object(jt.a)(Object(jt.a)({},e),{},{errors:t.payload});case ut:return Object(jt.a)(Object(jt.a)({},e),{},{errors:{}});case"LOGOUT":return Object(jt.a)({},Rt);default:return e}},It=a(49),Pt={postComments:[],posts:[],currentfilter:[]},Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(jt.a)(Object(jt.a)({},e),{},{someData:t.payload});case"GET_POST":e=Object(jt.a)(Object(jt.a)({},e),{},{posts:t.payload,postComments:t.allcomments});break;case"ADD_POST":var a=[].concat(Object(It.a)(e.posts),[t.post]),n=[].concat(Object(It.a)(e.postComments),[t.comment]);return Object(jt.a)(Object(jt.a)({},e),{},{posts:a,postComments:n});case"CHANGE_LIKE":var r=Object(It.a)(e.posts),o=r.find((function(e){return e._id==t.id}));return o.liked?(o.noOfLikes=o.noOfLikes-1,o.liked=!1):(o.noOfLikes=o.noOfLikes+1,o.liked=!0),Object(jt.a)(Object(jt.a)({},e),{},{posts:r});case"ADD_COMMENT":return Object(jt.a)(Object(jt.a)({},e),{},{postComments:e.postComments.map((function(e){return e.postId==t.id?Object(jt.a)(Object(jt.a)({},e),{},{comments:[].concat(Object(It.a)(e.comments),[t.comment])}):Object(jt.a)({},e)}))})}return e},Nt={profileDetails:{name:"",avatar:"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&s=50",followers:[],following:[],donations:[],achievements:[]},currentfilter:[]},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:e=Object(jt.a)(Object(jt.a)({},e),{},{currentfilter:t.selectedfilters});break;case G:e=Object(jt.a)(Object(jt.a)({},e),{},{profileDetails:t.payload});break;case"LOGOUT":e=Object(jt.a)({},Nt);break;case"ADD_DONATION":e=Object(jt.a)(Object(jt.a)({},e),{},{profileDetails:Object(jt.a)(Object(jt.a)({},e.profileDetails),{},{donations:[].concat(Object(It.a)(e.profileDetails.donations),[{_id:t.payload._id,title:t.payload.title}])})}),console.log("inside the left side reducer",e.profileDetails.donations)}return e},Mt=a(7),Ft=a.n(Mt),Gt="CHANGE_FILTERS",Ht={Donations:[],Organisations:[],Events:[],currentfilter:[]},Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DONATION":return Object(jt.a)(Object(jt.a)({},e),{},{Donations:t.donations});case"GET_ORGANISATION":return Object(jt.a)(Object(jt.a)({},e),{},{Organisations:t.organisations});case Gt:return Object(jt.a)(Object(jt.a)({},e),{},{currentfilter:t.selectedfilters});case"ADD_DONATION":var a=t.payload;return Object(jt.a)(Object(jt.a)({},e),{},{Donations:[].concat(Object(It.a)(e.Donations),[a])});case"PENDING_DONATION":var n=t.payload;return n.status="pending",n.receiverId=t.userId,Object(jt.a)(Object(jt.a)({},e),{},{Donations:e.Donations.map((function(e){return e._id==n._id?Object(jt.a)({},n):Object(jt.a)({},e)}))});case"REJECT_DONATION":return Object(jt.a)(Object(jt.a)({},e),{},{Donations:e.Donations.map((function(e){return e._id==t.id?Object(jt.a)(Object(jt.a)({},e),{},{status:"NotAccepted",receiverId:null}):Object(jt.a)({},e)}))});case"ACCEPT_DONATION":return Object(jt.a)(Object(jt.a)({},e),{},{Donations:e.Donations.map((function(e){return e._id==t.payload._id?Object(jt.a)(Object(jt.a)({},e),{},{status:"Accepted"}):Object(jt.a)({},e)}))})}return e},zt="GET_SOME_DATA",qt={users:[]},Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case zt:e=Object(jt.a)(Object(jt.a)({},e),{},{someData:t.payload})}return e},Vt={suggestedPages:[],profileDetails:{profilePic:"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&s=400",avatar:"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&s=50",name:"",description:"",contact:"",address:"",followers:[],following:[],donations:[],history:[],posts:[],noFed:0,noDonations:0},Pending:[],currentTab:"timelinePost",followers:[],following:[]},Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:e=Object(jt.a)(Object(jt.a)({},e),{},{someData:t.payload});break;case se:e=Object(jt.a)(Object(jt.a)({},e),{},{suggestedPages:t.payload});break;case ue:e=Object(jt.a)(Object(jt.a)({},e),{},{currentTab:t.payload});break;case pe:e=Object(jt.a)(Object(jt.a)({},e),{},{profileDetails:Object(jt.a)(Object(jt.a)({},t.payload),{},{followers:Object(It.a)(t.payload.followers),following:Object(It.a)(t.payload.following)})});break;case de:e=Object(jt.a)(Object(jt.a)({},e),{},{profileDetails:Object(jt.a)(Object(jt.a)({},e.profileDetails),t.payload)});break;case me:e=Object(jt.a)(Object(jt.a)({},e),{},{followers:Object(It.a)(t.payload)});break;case fe:e=Object(jt.a)(Object(jt.a)({},e),{},{following:Object(It.a)(t.payload)});break;case"PENDING_DONATION":var a=t.payload,n=a.donorName,r=a.postTime,o=a.description,i={donorname:n,Description:o,posttime:r};return Object(jt.a)(Object(jt.a)({},e),{},{Pending:[].concat(Object(It.a)(e.Pending),[i])});case"LOGOUT":e=Object(jt.a)({},Vt);break;case"GET_PENDING_DONATION":return Object(jt.a)(Object(jt.a)({},e),{},{Pending:t.payload});case"REJECT_DONATION":return Object(jt.a)(Object(jt.a)({},e),{},{Pending:e.Pending.filter((function(e){return e._id!==t.id}))});case"ACCEPT_DONATION":return Object(jt.a)(Object(jt.a)({},e),{},{Pending:e.Pending.filter((function(e){return e._id!==t.payload._id}))});case"ADD_HISTORY":case"ADD_FED":return Object(jt.a)(Object(jt.a)({},e),{},{profileDetails:t.payload})}return e},Yt={threads:[]},Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mt:e=Object(jt.a)(Object(jt.a)({},e),{},{threads:Object(It.a)(t.payload)});break;case ft:var a=e.threads.filter((function(e){return e._id!=t.payload._id}));e=Object(jt.a)(Object(jt.a)({},e),{},{threads:[t.payload].concat(Object(It.a)(a))});break;case"LOGOUT":e=Object(jt.a)({},Yt)}return e},Xt={key:"root",storage:kt.a},Jt=Object(f.combineReducers)({homeReducer:Ct,navReducer:St,authReducer:At,HomeCenterReducer:Lt,DiscoverReducer:Ut,ListReducer:Wt,LeftSidePanelReducer:_t,profileReducer:Bt,messageReducer:Kt}),$t=Object(Ot.a)(Xt,Jt),Qt=Object(f.createStore)($t,{},Object(Et.composeWithDevTools)(Object(f.applyMiddleware)(yt.a))),Zt=Object(Ot.b)(Qt),ea=function(){var e;if(console.log("someone wants to start connection",Xe),Xe)return console.log("socket already there"),Xe;var t=null===(e=Qt.getState().authReducer.user)||void 0===e?void 0:e.userId;return(Xe=dt()("/",{query:"user=".concat(t),reconnection:!0})).on("output_message",(function(e){Qt.dispatch(gt(e)),console.log("WOW... I got it",e)})),Xe},ta=function(e,t){return function(){var a=Object(D.a)(C.a.mark((function a(n){return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e),a.next=3,R.a.post("/api/users/register",e).then((function(e){return t.push("/login")})).catch((function(e){return n({type:lt,payload:e.response.data})}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},aa=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.a.post("/api/users/login",e).then((function(e){var t=e.data.token;localStorage.setItem("jwtToken",t),ot(t);var n=Object(it.a)(t);a(na(n)),ea()})).catch((function(e){return a({type:lt,payload:e.response.data})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},na=function(e){return{type:st,payload:e}},ra=function(){return function(e){console.log("dsa"),localStorage.removeItem("jwtToken"),ot(!1),e(na({})),e({type:"LOGOUT"})}},oa=function(){return function(e){e({type:ut})}},ia=a(588),la=a(125),ca=a(85),sa=a(615),ua=a(292),pa=a(633),da=a(634),ma=a(587),fa=a(635),ha=(a(499),a(293));a(500),a(501),a(502),a(503);delete Ft.a.Icon.Default.prototype._getIconUrl,Ft.a.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.4.0/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.4.0/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.4.0/dist/images/marker-shadow.png"});var ga=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).addMarker=function(t){var a=e.state.markers;a.pop(),a.push(t.latlng),e.props.saveLatLng(a[0]),e.setState({markers:a})},e.state={initialised:!1,markers:[]},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.leafletMap.leafletElement,t=(new ua.Geosearch).addTo(e),a=(new Ft.a.LayerGroup).addTo(e);t.on("results",(function(e){a.clearLayers()}))}},{key:"render",value:function(){var e=this,t=this.props.coords?this.props.coords.longitude:77.209,a=this.props.coords?this.props.coords.latitude:28.6139;!this.state.initialised&&this.props.coords&&(this.setState({initialised:!0}),this.addMarker({latlng:{lat:a,lng:t}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"MAP"},r.a.createElement(pa.a,{style:{height:"80vh"},center:[a,t],zoom:"10",ref:function(t){e.leafletMap=t},onClick:this.addMarker},r.a.createElement(da.a,{attribution:"\xa9 <a href='https://osm.org/copyright'>OpenStreetMap</a> contributors",url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.a.createElement("div",{className:"pointer"}),this.state.markers.map((function(e,t){return r.a.createElement(ma.a,{draggable:!0,key:"marker-".concat(t),position:e},r.a.createElement(fa.a,null,r.a.createElement("span",null,"Marked Location")))})))))}}]),a}(n.Component),ba=Object(ha.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:1e3})(ga),va=function(e,t){return function(){var a=Object(D.a)(C.a.mark((function a(n){var r;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,R.a.post("/api/donation/create",{donation:e});case 2:r=a.sent,n({type:"ADD_DONATION",payload:Object(jt.a)(Object(jt.a)({},r.data.donation),{},{contact:t})});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Ea={labelCol:{span:6},wrapperCol:{span:14}},ya={rules:[{type:"object",required:!0,message:"Please select time!"}]},Oa=function(e){return Array.isArray(e)?e:e&&e.fileList},wa=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={user:"Name"},e.saveLatLng=function(t){e.setState({latlng:t})},e.onChange=function(t,a){e.setState({Date:a})},e.disabledDate=function(e){return e&&e<ae()().endOf("day")},e.state={title:"",description:"",Date:"",files:[],mapOpen:!1,latlng:null},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state.latlng;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{destroyOnClose:!0,visible:this.props.visible,title:"Donation Details",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(j.a,{key:"back",onClick:this.props.handleCancel},"Return"),r.a.createElement(j.a,{key:"submit",type:"primary",loading:this.props.loading,form:"donateform",htmlType:"submit"},"Submit")]},r.a.createElement(ne.a,Object.assign({id:"donateform",name:"validate_other",onFieldsChange:function(t,a){e.setState({title:a[0].value,description:a[1].value})},onFinish:function(t){if(void 0!==e.state.latlng){e.props.handleOk();var a=t.dragger,n=null===a||void 0===a?void 0:a.map((function(e){return e.response.location}));console.log("this is to create the post",n);var r={donorId:e.props.profileDetails._id,title:e.state.title,expiryTime:e.state.Date,peopleFed:0,status:"NotAccepted",description:e.state.description,location:{type:"Point",coordinates:[e.state.latlng.lng,e.state.latlng.lat]},images:e.state.files,donorName:e.props.profileDetails.name};e.props.addDonation(r,e.props.profileDetails.contact),e.props.addHistory({color:"blue",icon:"clock",text:r.title+" ( Donation expires on "+r.expiryTime+" )"}),e.setState({latlng:null,files:[]})}}},Ea),r.a.createElement(ne.a.Item,Object.assign({},Ea,{name:"username",label:"Title",rules:[{required:!0,message:"Please input your Title"}]}),r.a.createElement(re.a,{placeholder:"Please input your Title"})),r.a.createElement(ne.a.Item,{name:["user","ItemDetails"],label:"ItemDetails",rules:[{required:!0,message:"Please Enter Items details"}]},r.a.createElement(re.a.TextArea,{placeholder:"Please Enter Items details here"})),r.a.createElement(ne.a.Item,Object.assign({name:"date-picker",label:"Enter expiry date"},ya),r.a.createElement(ia.a,{onChange:this.onChange,disabledDate:this.disabledDate,format:"HH:mm ll"})),r.a.createElement(ne.a.Item,{label:"Address",rules:[{required:!0,message:"Please input your address"}]},r.a.createElement(la.a,{gutter:8},r.a.createElement(ca.a,{span:20},r.a.createElement(re.a,{placeholder:"Location",disabled:!0,value:t?t.lat+" , "+t.lng:""})),r.a.createElement(ca.a,{span:2},r.a.createElement(j.a,{onClick:function(){return e.setState({mapOpen:!0})},icon:r.a.createElement(sa.a,null)})))),r.a.createElement(ne.a.Item,{label:"Dragger"},r.a.createElement(ne.a.Item,{name:"dragger",valuePropName:"fileList",getValueFromEvent:Oa,noStyle:!0},r.a.createElement(oe.a.Dragger,{multiple:!1,name:"file",customRequest:function(){var t=Object(D.a)(C.a.mark((function t(a){var n,r,o,i;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.file,r=a.onSuccess,o=a.onError,(i=new FormData).append("file",n),t.next=5,R.a.post("/upload/donations",i).then((function(t){var a;r(t.data),a=t.data,e.setState({files:[].concat(Object(It.a)(e.state.files),[a.location])})})).catch((function(e){console.log("error in uploading"),o("Error in uploading.Try again")}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(ie.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),r.a.createElement("p",{className:"ant-upload-hint"},"Support for a single or bulk upload.")))))),r.a.createElement(v.a,{footer:[r.a.createElement(j.a,{onClick:function(){return e.setState({mapOpen:!1})}},"Return")],centered:!0,closable:!1,width:"90vw",visible:this.state.mapOpen},r.a.createElement(ba,{saveLatLng:this.saveLatLng})))}}]),a}(n.Component),ka=Object(m.b)((function(e){return{profileDetails:e.LeftSidePanelReducer.profileDetails}}),(function(e){return{addHistory:Object(f.bindActionCreators)(be,e),addDonation:Object(f.bindActionCreators)(va,e)}}))(wa),ja=b.a.Header,xa=re.a.Search,Ca=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,visible:!1},e.showModal=function(){e.setState({visible:!0})},e.handleOk=function(){e.setState({loading:!0}),setTimeout((function(){e.setState({loading:!1,visible:!1})}),500),v.a.success({content:"Donations posted"})},e.handleCancel=function(){e.setState({visible:!1})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.visible,a=e.loading,n=this.props,o=n.currentRoute,i=n.setCurrentRoute,l=n.logoutUser,c=n.auth;return c.isAuthenticated?r.a.createElement("div",null,r.a.createElement(ja,{style:{position:"fixed",zIndex:100,width:"100%"}},r.a.createElement(P.a,{theme:"dark",mode:"horizontal",selectedKeys:[o,"logo"],onSelect:function(e){"logout"==e.key?l():i(e.key)}},r.a.createElement(P.a.Item,{key:"logo",className:"customclasslogo",icon:r.a.createElement(Qe.a,null)},r.a.createElement(I.b,{to:"/home"},"NofoodWasted")),r.a.createElement(j.a,{type:"dashed",size:"large",style:{marginRight:"8px",marginLeft:"8px"},onClick:this.showModal},"Donate Now!"),r.a.createElement(ka,{handleCancel:this.handleCancel,handleOk:this.handleOk,showModal:this.showModal,visible:t,loading:a}),r.a.createElement(P.a.Item,{key:"home",icon:r.a.createElement(Ze.a,null)},r.a.createElement(I.b,{to:"/home"},"Home")),r.a.createElement(P.a.Item,{key:"discover",icon:r.a.createElement(h.a,null)},r.a.createElement(I.b,{to:"/discover"},"Discover")),r.a.createElement(P.a.Item,{key:"community",icon:r.a.createElement(et.a,null)},r.a.createElement(I.b,{to:"/community"},"Community")),r.a.createElement(P.a.Item,{key:"leaderboard",icon:r.a.createElement(tt.a,null)},r.a.createElement(I.b,{to:"/leaderboard"},"Leaderboard")),r.a.createElement(P.a.Item,{key:"notifications",icon:r.a.createElement(at.a,null)},r.a.createElement(I.b,{to:"/notifications"},"Notifications")),r.a.createElement(P.a.Item,{key:"messages",icon:r.a.createElement(nt.a,null)},r.a.createElement(I.b,{to:"/messages"},"Messages")),r.a.createElement(P.a.Item,{key:"profile",icon:r.a.createElement(N.a,null)},r.a.createElement(I.b,{to:"/i/profile/".concat(c.user.userId)},"Profile")),r.a.createElement(P.a.Item,{key:"search"},r.a.createElement(xa,{placeholder:"Search",onSearch:function(e){return console.log(e)},style:{width:200}})),r.a.createElement(P.a.Item,{key:"logout",icon:r.a.createElement(rt.a,null)},"Logout")))):null}}]),a}(n.Component),Da=Object(c.g)(Object(m.b)((function(e){return{currentRoute:e.navReducer.currentRoute,auth:e.authReducer}}),(function(e){return{setCurrentRoute:Object(f.bindActionCreators)(M,e),logoutUser:Object(f.bindActionCreators)(ra,e)}}))(Ca)),Sa=a(625),Ta=a(626),Ra=a(627),Aa=a(623),Ia=a(628),Pa=a(629),La=a(211),Na=a(600),_a=(a(510),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.title,o=t.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{title:n,visible:this.props.visible,onCancel:this.props.handleCancel,destroyOnClose:!0,footer:[r.a.createElement(j.a,{type:"primary",onClick:this.props.handleCancel},"Close")]},r.a.createElement(E.b,{itemLayout:"horizontal",dataSource:a,loading:o,renderItem:function(t){return r.a.createElement(I.b,{onClick:e.props.handleCancel,to:"/profile/".concat(t._id)},r.a.createElement(E.b.Item,null,r.a.createElement(E.b.Item.Meta,{avatar:r.a.createElement(O.a,{src:t.avatar}),title:r.a.createElement("a",null,t.name),description:t.description})))}}),","))}}]),a}(r.a.Component)),Ma=a(107),Fa=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e,t=this.props.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{visible:this.props.visible,title:"Edit Profile",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(j.a,{key:"back",onClick:this.props.handleCancel},"Return"),r.a.createElement(j.a,{form:"edit-profile-form",key:"submit",type:"primary",htmlType:"submit",loading:this.props.loading},"Submit")]},r.a.createElement(ne.a,{id:"edit-profile-form",layout:"vertical",name:"form_in_modal",initialValues:(e={},Object(Ma.a)(e,"name",t.name),Object(Ma.a)(e,"contact",t.contact),Object(Ma.a)(e,"address",t.address),Object(Ma.a)(e,"description",t.description),e),onFinish:this.props.handleOk},r.a.createElement(ne.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name!"}]},r.a.createElement(re.a,{prefix:r.a.createElement(N.a,{className:"site-form-item-icon"})})),r.a.createElement(ne.a.Item,{label:"Contact",name:"contact",rules:[{required:!0,message:"Please input your contact!"}]},r.a.createElement(re.a,{prefix:r.a.createElement(Aa.a,{className:"site-form-item-icon"})})),r.a.createElement(ne.a.Item,{label:"Address",name:"address",rules:[{required:!0,message:"Please input your address!"}]},r.a.createElement(re.a.TextArea,null)),r.a.createElement(ne.a.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Please input a brief description!"}]},r.a.createElement(re.a.TextArea,null)))))}}]),a}(r.a.Component),Ga=Object(m.b)((function(e){return{data:e.profileReducer.profileDetails}}))(Fa),Ha=a(624),Ua=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{visible:this.props.visible,title:"Change Profile Picture",onOk:this.props.handleOk,onCancel:this.props.handleCancel,footer:[r.a.createElement(j.a,{key:"back",onClick:this.props.handleCancel},"Return")]},r.a.createElement(oe.a,{multiple:!1,name:"file",accept:"image/*",customRequest:function(){var t=Object(D.a)(C.a.mark((function t(a){var n,r,o,i;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.file,r=a.onSuccess,o=a.onError,(i=new FormData).append("file",n),t.next=5,R.a.post("/upload/profile-pic",i).then((function(t){r(t.data),e.props.uploadProfilePic(t.data.profilePic,t.data.avatar)})).catch((function(e){console.log("error in uploading"),o("Error in uploading. Try again")}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),listType:"picture"},r.a.createElement(j.a,{icon:r.a.createElement(Ha.a,null)},"Upload Profile Pic"))))}}]),a}(r.a.Component),za=Object(m.b)(null,(function(e){return{uploadProfilePic:Object(f.bindActionCreators)(we,e)}}))(Ua),qa=La.a.TabPane,Wa=b.a.Content,Va=b.a.Sider,Ba={labelCol:{span:8},wrapperCol:{span:16}},Ya=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={followersVisible:!1,followingVisible:!1,loadingAccept:!1,visibleAccept:!1,visibleEdit:!1,visibleProfilePic:!1,loadingEdit:!1,clicked:!1,followLoading:!1,unfollowLoading:!1,followListLoading:!1,profilePageLoading:!1,followingText:"Following"},e.showModal=function(){e.setState({visible:!0})},e.handleOk=function(t){console.log(t),e.setState({visible:!1})},e.handleCancel=function(t){console.log(t),e.setState({visible:!1})},e.showModalAccept=function(t){e.props.acceptdonation(t),e.props.addHistory({color:"green",icon:"dot",text:t.title+" ( Donation accepted on "+ae()().format("HH:mm ll")+" )"}),e.setState({visibleAccept:!0})},e.handleOkAccept=function(){e.setState({loadingAccept:!0}),setTimeout((function(){e.setState({loadingAccept:!1,visibleAccept:!1})}),1e3),v.a.success({content:"Donation Shared on profile"})},e.handleCancelAccept=function(){e.setState({visibleAccept:!1})},e.handleCancelProfilePic=function(){e.setState({visibleProfilePic:!1})},e.showModalEdit=function(){e.setState({visibleEdit:!0})},e.handleOkEdit=function(){var t=Object(D.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loadingEdit:!0}),t.next=3,e.props.editProfile(a);case 3:e.setState({loadingEdit:!1,visibleEdit:!1});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleCancelEdit=function(){e.setState({visibleEdit:!1})},e.callback=function(e){console.log(e)},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(D.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({profilePageLoading:!0}),e.next=3,this.props.getProfile(this.props.match.params.id);case 3:return e.next=5,this.props.getPendingDonations();case 5:this.setState({profilePageLoading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a=this,n=this.state,o=n.followersVisible,i=n.followingVisible,l=n.loadingAccept,c=n.visibleAccept,s=n.visibleEdit,u=n.loadingEdit,p=n.visibleProfilePic,d=this.props,m=d.PendingDonations,f=d.profileDetails,h=d.user,g=d.followUser,x=d.unfollowUser,S=d.getFollowers,T=d.getFollowing,R=function(){var e,t,a;return r.a.createElement(La.a,{centered:"true",size:"large"},r.a.createElement(qa,{tab:"Timeline",key:"timelinePost"},r.a.createElement(Na.a,{mode:"alternate"},null===f||void 0===f||null===(e=f.history)||void 0===e?void 0:e.map((function(e){return r.a.createElement(Na.a.Item,{color:null===e||void 0===e?void 0:e.color,dot:"clock"===(null===e||void 0===e?void 0:e.icon)?r.a.createElement(Sa.a,null):null},e.text)})))),r.a.createElement(qa,{tab:"Donations",key:"donations"},null===f||void 0===f||null===(t=f.donations)||void 0===t?void 0:t.map((function(e){return r.a.createElement(y.a,{title:e.title,extra:r.a.createElement("div",null,e.status),style:{marginLeft:"75px",marginRight:"75px",marginTop:"8px"}},r.a.createElement("p",null,e.description),r.a.createElement(w.b,null,(t=e.images).length?t.map((function(e){return r.a.createElement(B.a,{width:100,height:100,alt:"example",src:e})})):r.a.createElement("div",null," No images!")));var t}))),r.a.createElement(qa,{tab:"Posts",key:"posts"},null===f||void 0===f||null===(a=f.posts)||void 0===a?void 0:a.map((function(e){return r.a.createElement(y.a,{title:e.author,extra:e.DateTime,style:{marginLeft:"75px",marginRight:"75px",marginTop:"8px"}},r.a.createElement("p",null,e.description))}))),r.a.createElement(qa,{tab:"Acheivements",key:"achievements"},r.a.createElement("p",{style:{fontSize:"20px",textAlign:"center"}}," Coming Soon!")))},A=m.length?m.map((function(e){return r.a.createElement(y.a,{title:e.donorName,extra:ae()(e.postTime).format("HH:mm ll"),size:"small",style:{width:250},actions:[r.a.createElement("p",{classname:"cardtext1",onClick:function(){return a.showModalAccept(e)}},r.a.createElement(Ta.a,{hoverable:!0,key:"Accept"})," Accept "),r.a.createElement("p",{onClick:function(){return a.props.rejectDonation(e._id)}},r.a.createElement(Ra.a,{hoverable:!0,key:"Reject"})," Reject ")]},r.a.createElement("p",null,e.description))})):r.a.createElement("div",null,"No Donations are currently there!");return this.state.profilePageLoading?r.a.createElement(He,null):r.a.createElement(b.a,{key:this.props.match.params.id,className:"layout",style:{marginTop:"56px"}},r.a.createElement(b.a,null,r.a.createElement(Va,{width:250,style:{padding:"20px"}},r.a.createElement(E.b,{itemLayout:"horizontal",header:r.a.createElement("div",{style:{fontWeight:"bolder",padding:"5px",fontSize:"medium"}},"Suggested pages"),renderItem:function(e){return r.a.createElement(E.b.Item,null,r.a.createElement(E.b.Item.Meta,{avatar:r.a.createElement(O.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:r.a.createElement("a",{href:"https://www.google.com/"},e.title),description:"brief description"}))}})),r.a.createElement(b.a,null,r.a.createElement(Wa,{style:{padding:24,marginTop:24,minHeight:280},key:this.props.match.params.id},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(B.a,{width:250,src:null===f||void 0===f?void 0:f.profilePic}),r.a.createElement(j.a,{shape:"circle",style:{marginLeft:"-15px",zIndex:"10"},onClick:function(){return a.setState({visibleProfilePic:!0})}},r.a.createElement(Q.a,null)),r.a.createElement("div",{style:{marginLeft:"20px",display:"flex",flexDirection:"column",justifyContent:"space-evenly"}},r.a.createElement("p",{style:{fontSize:"24px",marginBottom:"0px",fontWeight:500}},f.name),r.a.createElement("div",null,r.a.createElement("p",null,null===f||void 0===f?void 0:f.description),r.a.createElement(Aa.a,null)," ",r.a.createElement("span",{style:{fontWeight:500,marginRight:"20px"}},null===f||void 0===f?void 0:f.contact),r.a.createElement(Ze.a,null)," ",r.a.createElement("span",{style:{fontWeight:500}},null===f||void 0===f?void 0:f.address)),r.a.createElement("div",{style:{marginLeft:"-16px",marginTop:"6px"}},r.a.createElement(j.a,{type:"link",size:"large",style:{fontWeight:"bolder"},onClick:Object(D.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({followersVisible:!0,followListLoading:!0}),e.next=3,S(a.props.match.params.id);case 3:a.setState({followListLoading:!1});case 4:case"end":return e.stop()}}),e)})))},null===f||void 0===f||null===(e=f.followers)||void 0===e?void 0:e.length," Followers"),r.a.createElement(j.a,{type:"link",size:"large",style:{fontWeight:"bolder"},onClick:Object(D.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({followingVisible:!0,followListLoading:!0}),e.next=3,T(a.props.match.params.id);case 3:a.setState({followListLoading:!1});case 4:case"end":return e.stop()}}),e)})))},null===f||void 0===f||null===(t=f.following)||void 0===t?void 0:t.length," Following"),r.a.createElement(_a,{title:"Followers",data:this.props.followers,handleCancel:function(){return a.setState({followersVisible:!1})},showModal:function(){return a.setState({followersVisible:!0})},visible:o,loading:this.state.followListLoading}),r.a.createElement(_a,{title:"Following",data:this.props.following,handleCancel:function(){return a.setState({followingVisible:!1})},showModal:function(){return a.setState({followingVisible:!0})},visible:i,loading:this.state.followListLoading}),h.userId===this.props.match.params.id?r.a.createElement("span",{style:{float:"right",marginTop:"6px"}},r.a.createElement(j.a,{onClick:this.showModalEdit,type:"primary",style:{marginRight:"8px"}},r.a.createElement(Q.a,null)," Edit Profile"),r.a.createElement(Ga,{handleCancel:this.handleCancelEdit,handleOk:this.handleOkEdit,showModal:this.showModalEdit,visible:s,loading:u}),r.a.createElement(za,{visible:p,handleCancel:this.handleCancelProfilePic})):r.a.createElement("span",{style:{float:"right",marginTop:"6px"}},r.a.createElement(r.a.Fragment,null,(null===f||void 0===f?void 0:f.followers.find((function(e){return e==h.userId})))?r.a.createElement(j.a,{onMouseOver:function(){a.setState({followingText:"Unfollow"})},onMouseLeave:function(){a.setState({followingText:"Following"})},loading:this.state.unfollowLoading,type:"Unfollow"==this.state.followingText?"danger":"primary",style:{marginRight:"14px"},onClick:Object(D.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({unfollowLoading:!0}),e.next=3,x(a.props.match.params.id);case 3:a.setState({unfollowLoading:!1});case 4:case"end":return e.stop()}}),e)})))},r.a.createElement("p",null," ",r.a.createElement(Ia.a,null)," ",this.state.followingText)):r.a.createElement(j.a,{loading:this.state.followLoading,type:"primary",style:{marginRight:"14px"},onClick:Object(D.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({followLoading:!0}),e.next=3,g(a.props.match.params.id);case 3:a.setState({followLoading:!1});case 4:case"end":return e.stop()}}),e)})))},r.a.createElement("p",null," ",r.a.createElement(Ia.a,null)," Follow ")),r.a.createElement(I.b,{onClick:function(){return a.props.setCurrentRoute("messages")},to:{pathname:"/messages",state:{user:this.props.match.params.id}}},r.a.createElement(j.a,{type:"primary",style:{marginRight:"14px"}},r.a.createElement(Pa.a,null)," Message"))))),r.a.createElement("div",{style:{marginTop:"8px"}},r.a.createElement("p",{style:{fontWeight:600}},r.a.createElement("span",null,null===f||void 0===f?void 0:f.name," has fed ",null===f||void 0===f?void 0:f.noFed," people and made ",null===f||void 0===f?void 0:f.noDonations," donations overall!"))))),r.a.createElement(k.a,{style:{background:"rgba(151,3,62, 0.2)"}}),r.a.createElement(R,null)),h.userId===this.props.match.params.id?r.a.createElement(Va,{width:300,style:{padding:"20px"}},r.a.createElement("div",{style:{fontWeight:"bolder",paddingBottom:"15px",paddingTop:"15px",fontSize:"medium"}},"Pending Donations"),r.a.createElement("div",null,A)):null)),r.a.createElement(v.a,{destroyOnClose:!0,visible:c,title:"Accept Donation",onOk:this.handleOkAccept,onCancel:this.handleCancelAccept,footer:[r.a.createElement(j.a,{key:"back",onClick:this.handleCancelAccept},"Say Thanks"),r.a.createElement(j.a,{key:"submit",type:"primary",loading:l,onClick:this.handleOkAccept,form:"acceptform",htmlType:"submit"},"Submit")]},r.a.createElement(ne.a,Object.assign({id:"acceptform"},Ba,{name:"basic",onFinish:function(e){a.props.addFed(e.peoplefed)},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(ne.a.Item,{label:"No of people fed ?",name:"peoplefed",rules:[{required:!0,message:"Please input peoplefed"}]},r.a.createElement(re.a,{type:"number",placeholder:"Input Number Here"})),r.a.createElement(ne.a.Item,{label:"Rate the User",name:"rating",rules:[{required:!0,message:"Please rate the user"}]},r.a.createElement(re.a,{type:"number",placeholder:"Rate Between 1 to 5"})))))}}]),a}(n.Component),Ka=Object(m.b)((function(e){return console.log(e.profileReducer.profileDetails),{suggestedPages:e.profileReducer.suggestedPages,currentTab:e.profileReducer.currentTab,donations:e.profileReducer.donations,timelinePost:e.profileReducer.profileDetails.history,posts:e.profileReducer.posts,PendingDonations:e.profileReducer.Pending,profileDetails:e.profileReducer.profileDetails,user:e.authReducer.user,followers:e.profileReducer.followers,following:e.profileReducer.following}}),(function(e){return{addFed:Object(f.bindActionCreators)(Ee,e),addHistory:Object(f.bindActionCreators)(be,e),acceptdonation:Object(f.bindActionCreators)(he,e),getSomeData:Object(f.bindActionCreators)(ge,e),changeTab:Object(f.bindActionCreators)(Oe,e),getProfile:Object(f.bindActionCreators)(ve,e),followUser:Object(f.bindActionCreators)(ke,e),unfollowUser:Object(f.bindActionCreators)(je,e),getFollowers:Object(f.bindActionCreators)(xe,e),getFollowing:Object(f.bindActionCreators)(Ce,e),setCurrentRoute:Object(f.bindActionCreators)(M,e),rejectDonation:Object(f.bindActionCreators)(De,e),getPendingDonations:Object(f.bindActionCreators)(ye,e),editProfile:Object(f.bindActionCreators)(Se,e)}}))(Ya),Xa=a(210),Ja=a.n(Xa),$a=(a(549),function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:Gt,selectedfilters:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),Qa=function(){return function(){var e=Object(D.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("api/users/organisations");case 2:a=e.sent,t({type:"GET_ORGANISATION",organisations:a.data.organisations});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Za=function(){return function(){var e=Object(D.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("/api/donation/donations");case 2:a=e.sent,t({type:"GET_DONATION",donations:a.data.donations});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},en=function(e){return function(){var t=Object(D.a)(C.a.mark((function t(a,n){var r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().authReducer.user.userId,t.next=3,R.a.post("/api/donation/changeStatus",{_id:e._id,status:"pending"});case 3:a({type:"PENDING_DONATION",payload:e,userId:r});case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},tn=b.a.Content,an=b.a.Sider,nn=P.a.SubMenu;var rn={labelCol:{span:8},wrapperCol:{span:16}},on=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={Organisations:[],Events:[],selectedMenuItem:"1",loading:!1,visible:!1,filters:[]},e.showModal=function(t){e.props.acceptdonation(t),e.props.addHistory({color:"green",icon:"dot",text:t.title+" ( Donation accepted on "+ae()().format("HH:mm ll")+" )"}),e.setState({visible:!0})},e.handleOk=function(){e.setState({loading:!0}),setTimeout((function(){e.setState({loading:!1,visible:!1})}),1e3),v.a.success({content:"Donation Shared on profile"})},e.handleCancel=function(){e.setState({visible:!1})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(D.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({profilePageLoading:!0}),e.next=3,this.props.getOrganisation();case 3:this.props.getDonation(),this.setState({profilePageLoading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.Events,n=t.selectedMenuItem,o=t.visible,i=t.loading,l=this.props,c=l.Organisations,s=l.Donations,u=l.pendingDonations,p=l.pendingDonorDonation,d=function(t){return 0===e.props.userType.localeCompare("donor")||e.props.userId==t.donorId?[]:[r.a.createElement(I.b,{to:{pathname:"/messages",state:{user:t.donorId}}},r.a.createElement("p",{className:"text",onClick:function(){e.props.setCurrentRoute("messages")}},r.a.createElement("b",null," Contact Donor "))),r.a.createElement("p",{className:"text",onClick:function(){return function(t){e.props.pendingDonation(t)}(t)}},r.a.createElement("b",null," Interested "))]},m=function(t){var a=e.state.filters;if(a.find((function(e){return 0===e.localeCompare("Time")}))){var n=Ja()(t,(function(e){return new ae.a(e.createdAt)}));return console.log(n),n}if(a.find((function(e){return 0===e.localeCompare("Expiry Date")}))){var r=Ja()(t,(function(e){return new ae.a(e.expiryTime)}));return console.log(r),r}return t}(s),f=s.length?m.map((function(t){return r.a.createElement(y.a,{title:r.a.createElement(I.b,{onClick:function(){return e.props.setCurrentRoute("profile")},to:"/profile/".concat(t.donorId)},t.donorName),extra:r.a.createElement("div",null,ae()(t.postTime).format("HH:mm ll")),style:{width:700,margin:"8px"},actions:d(t)},r.a.createElement("p",null,t.description),r.a.createElement(w.b,null,(a=t.images).length?a.map((function(e){return r.a.createElement(B.a,{width:100,height:100,alt:"example",src:e})})):r.a.createElement("div",null," No images!")));var a})):r.a.createElement("div",null,"No Donations are currently there!"),h=u.length?u.map((function(t){return r.a.createElement(y.a,{title:t.donorName,extra:ae()(t.postTime).format("HH:mm ll"),size:"small",style:{width:250},actions:[r.a.createElement("p",{classname:"cardtext1",onClick:function(){return e.showModal(t)}},r.a.createElement(Ta.a,{hoverable:!0,key:"Accept"})," Accept "),r.a.createElement("p",{onClick:function(){return e.props.rejectDonation(t._id)}},r.a.createElement(Ra.a,{hoverable:!0,key:"Reject"})," Reject ")]},r.a.createElement("p",null,t.description))})):r.a.createElement("div",null,"No Pending donations are currently there!"),g=p.length?p.map((function(e){return r.a.createElement(y.a,{title:e.donorName,extra:ae()(e.postTime).format("HH:mm ll"),size:"small",style:{width:250}},r.a.createElement("p",null,e.description))})):r.a.createElement("div",null,"No Donations are currently there!"),E=c.length?c.map((function(t){return r.a.createElement(I.b,{onClick:function(){return e.props.setCurrentRoute("profile")},to:"/profile/".concat(t._id)},r.a.createElement(y.a,{title:r.a.createElement("div",null," ",r.a.createElement(O.a,{src:t.avatar,alt:"Han Solo"})," ",r.a.createElement("a",null,t.name)," "),extra:r.a.createElement("p",null,"People fed ",null===t||void 0===t?void 0:t.noFed),style:{width:700,margin:"8px"}},r.a.createElement("p",null,r.a.createElement(Aa.a,null)," : ",t.contact," ",r.a.createElement(Ze.a,null)," : ",t.address," "),r.a.createElement("p",null,t.description)))})):r.a.createElement("div",null,"No Organisation are currently there!"),k=a.length?a.map((function(e){return r.a.createElement(y.a,{title:e.title,style:{width:700,margin:"8px"}},r.a.createElement("p",null,e.description))})):r.a.createElement("div",null,"No Events are currently there!"),x=function(t){e.setState({selectedMenuItem:t})};return this.state.profilePageLoading?r.a.createElement(He,null):r.a.createElement(b.a,null,r.a.createElement(an,{width:280,className:"site-layout-background",style:{overflow:"auto",height:"100vh",position:"fixed",left:0,marginTop:"64px"}},r.a.createElement(P.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["1"],style:{height:"100%",borderRight:0},onClick:function(e){return x(e.key)}},r.a.createElement(nn,{key:"1",title:"Donations",onTitleClick:function(e){return x(e.key)},style:{fontSize:"16px"}},r.a.createElement("div",{style:{padding:"auto"}},r.a.createElement(L.a.Group,{options:[{label:"Location",value:"Location"},{label:"Expiry Date",value:"Expiry Date"},{label:"Time",value:"Time"}],onChange:function(t){e.setState({filters:Object(It.a)(t)})}}))),r.a.createElement(P.a.Item,{key:"2"},"Nearby Organisations"),r.a.createElement(P.a.Item,{key:"3"},"Nearby Events/Activities"))),r.a.createElement(b.a,{style:{marginLeft:"280px",marginTop:"64px"}},r.a.createElement(tn,{className:"site-layout-background",style:{paddingLeft:125,minHeight:280}},function(e){switch(e){case"1":return f;case"2":return E;case"3":return k;default:return f}}(n)),r.a.createElement(an,{width:300,style:{padding:"25px"}},r.a.createElement("div",{style:{fontWeight:"bolder",paddingBottom:"15px",fontSize:"medium"}},"Pending Donations"),r.a.createElement("div",null,0===this.props.userType.localeCompare("donor")?g:h))),r.a.createElement(v.a,{destroyOnClose:!0,visible:o,title:"Accept Donation",onOk:this.handleOk,onCancel:this.handleCancel,footer:[r.a.createElement(j.a,{key:"back",onClick:this.handleCancel},"Say Thanks"),r.a.createElement(j.a,{key:"submit",type:"primary",loading:i,onClick:this.handleOk,form:"acceptform",htmlType:"submit"},"Submit")]},r.a.createElement(ne.a,Object.assign({id:"acceptform"},rn,{name:"basic",onFinish:function(t){e.props.addFed(t.peoplefed)},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(ne.a.Item,{label:"No of people fed ?",name:"peoplefed",rules:[{required:!0,message:"Please input peoplefed"}]},r.a.createElement(re.a,{type:"number",placeholder:"Input Number Here"})),r.a.createElement(ne.a.Item,{label:"Rate the User",name:"rating",rules:[{required:!0,message:"Please rate the user"}]},r.a.createElement(re.a,{type:"number",placeholder:"Rate Between 1 to 5"})))))}}]),a}(n.Component),ln=Object(m.b)((function(e){return{pendingDonorDonation:e.DiscoverReducer.Donations.filter((function(t){var a=e.authReducer.user.userId;return 0==t.status.localeCompare("pending")&&t.donorId==a})),userType:e.authReducer.user.userType,userId:e.authReducer.user.userId,currentfilter:e.DiscoverReducer.currentfilter,Donations:e.DiscoverReducer.Donations.filter((function(e){return 0===e.status.localeCompare("NotAccepted")})),pendingDonations:e.DiscoverReducer.Donations.filter((function(t){var a=e.authReducer.user.userId;return 0==t.status.localeCompare("pending")&&t.receiverId==a})),Organisations:e.DiscoverReducer.Organisations,Events:e.DiscoverReducer.Events}}),(function(e,t){return{addFed:Object(f.bindActionCreators)(Ee,e),addHistory:Object(f.bindActionCreators)(be,e),getOrganisation:Object(f.bindActionCreators)(Qa,e),acceptdonation:Object(f.bindActionCreators)(he,e),changeFilters:Object(f.bindActionCreators)($a,e),pendingDonation:Object(f.bindActionCreators)(en,e),rejectDonation:Object(f.bindActionCreators)(De,e),getDonation:Object(f.bindActionCreators)(Za,e),setCurrentRoute:Object(f.bindActionCreators)(M,e)}}))(on),cn=a(603),sn=a(176),un=a(632),pn=a(304),dn=Object(m.b)((function(e){return{auth:e.authReducer}}))((function(e){var t=e.component,a=e.auth,n=e.my,o=Object(pn.a)(e,["component","auth","my"]);return r.a.createElement(c.b,Object.assign({},o,{render:function(e){return!0===a.isAuthenticated?!0===n?r.a.createElement(t,Object.assign({key:"my"},e)):r.a.createElement(t,Object.assign({key:Math.random()},e)):r.a.createElement(c.a,{to:"/login"})}}))})),mn=(a(602),a(597)),fn=a(630),hn=a(631),gn=a(154),bn=a.n(gn),vn=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).onChange=function(t){console.log("radio checked",t.target.value),e.setState({value:t.target.value})},e.openNotificationWithIcon=function(e,t){cn.a[e]({message:t})},e.onSubmit=function(){var t=Object(D.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(a),a.password==a.password2){t.next=5;break}e.openNotificationWithIcon("warning","Passwords are not matching"),t.next=19;break;case 5:if(e.state.latlng){t.next=9;break}e.openNotificationWithIcon("warning","Please enter your location"),t.next=19;break;case 9:if("organisation"!=a.userType||0!=e.state.certificates.length){t.next=13;break}e.openNotificationWithIcon("warning","Please upload the certificates"),t.next=19;break;case 13:return console.log("everythhing okay",Object(jt.a)(Object(jt.a)({},a),{},{location:e.state.latlng})),console.log(e.state.certificates,a.userType),e.setState({loading:!0}),t.next=18,e.props.registerUser(Object(jt.a)(Object(jt.a)({},a),{},{certificates:e.state.certificates,location:{type:"Point",coordinates:[e.state.latlng.lng,e.state.latlng.lat]}}),e.props.history);case 18:e.setState({loading:!1});case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveLatLng=function(t){e.setState({latlng:t})},e.state={errors:{},value:1,mapOpen:!1,latlng:null,certificates:[],loading:!1},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/home")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this,t={display:"block",height:"30px",lineHeight:"30px"},a=this.state,n=(a.errors,a.value);return r.a.createElement("div",{style:{paddingTop:"20px",display:"flex",justifyContent:"center"}},r.a.createElement(ne.a,{layout:"vertical",style:{width:"500px"},onFinish:this.onSubmit},r.a.createElement(ne.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name!"}]},r.a.createElement(re.a,{prefix:r.a.createElement(N.a,{className:"site-form-item-icon"})})),r.a.createElement(ne.a.Item,{label:"Email",name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your email!"}]},r.a.createElement(re.a,{prefix:r.a.createElement(fn.a,{className:"site-form-item-icon"})})),r.a.createElement(ne.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(re.a.Password,{prefix:r.a.createElement(hn.a,{className:"site-form-item-icon"})})),r.a.createElement(ne.a.Item,{label:"Confirm Password",name:"password2",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(re.a.Password,{prefix:r.a.createElement(hn.a,{className:"site-form-item-icon"})})),r.a.createElement(re.a,{placeholder:"Location",disabled:!0,value:this.state.latlng?this.state.latlng.lat+" , "+this.state.latlng.lng:"",style:{width:300,marginBottom:"10px"}}),r.a.createElement(j.a,{onClick:function(){return e.setState({mapOpen:!0})},icon:r.a.createElement(sa.a,null)})," ",r.a.createElement("br",null),r.a.createElement(ne.a.Item,{label:"Contact",name:"contact",rules:[{required:!0,message:"Please input your contact!"}]},r.a.createElement(re.a,{prefix:r.a.createElement(Aa.a,{className:"site-form-item-icon"})})),r.a.createElement(ne.a.Item,{label:"Address",name:"address",rules:[{required:!0,message:"Please input your address!"}]},r.a.createElement(re.a.TextArea,null)),r.a.createElement(ne.a.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Please input a brief description!"}]},r.a.createElement(re.a.TextArea,null)),r.a.createElement(ne.a.Item,{label:"Choose User type",name:"userType",rules:[{required:!0,message:"Please Choose user type"}]},r.a.createElement(mn.a.Group,{onChange:this.onChange,value:n},r.a.createElement(mn.a,{style:t,value:"donor"},"Donor"),r.a.createElement(mn.a,{style:t,value:"organisation"},"Organisation",r.a.createElement("br",null),"organisation"===n?r.a.createElement("div",{style:{marginLeft:25}},r.a.createElement(oe.a,{multiple:!1,name:"file",accept:"application/pdf",customRequest:function(){var t=Object(D.a)(C.a.mark((function t(a){var n,r,o,i;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.file,r=a.onSuccess,o=a.onError,(i=new FormData).append("file",n),t.next=5,R.a.post("/upload/certificates",i).then((function(t){e.setState({certificates:[].concat(Object(It.a)(e.state.certificates),[t.data.location])}),r(t.data)})).catch((function(e){console.log("error in uploading"),o("Error in uploading. Try again")}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRemove:function(t){var a=t.response.location,n=e.state.certificates.filter((function(e){return e!=a}));e.setState({certificates:n})}},r.a.createElement("p",null,"Please upload Government issued certificate for your Organisation(in pdf format)"),r.a.createElement(j.a,{icon:r.a.createElement(Ha.a,null)},"Upload certificates"))):null))),r.a.createElement(ne.a.Item,null,r.a.createElement(j.a,{type:"primary",htmlType:"submit"},"Register")," ","Or ",r.a.createElement(I.b,{to:"/login"},"Login now!"))),r.a.createElement(bn.a,{footer:[r.a.createElement(j.a,{onClick:function(){return e.setState({mapOpen:!1})}},"Return")],centered:!0,closable:!1,width:"90vw",visible:this.state.mapOpen},r.a.createElement(ba,{saveLatLng:this.saveLatLng})))}}]),a}(n.Component),En=Object(m.b)((function(e){return{auth:e.authReducer,errors:e.authReducer.errors}}),(function(e){return{registerUser:Object(f.bindActionCreators)(ta,e)}}))(Object(c.g)(vn)),yn=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).onSubmit=function(){var t=Object(D.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,e.props.loginUser(a);case 3:e.setState({loading:!1});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={errors:{},loading:!1},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/home")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/home"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){this.state.errors;return r.a.createElement("div",{style:{paddingTop:"200px",height:"100vh",display:"flex",justifyContent:"center"}},r.a.createElement(ne.a,{layout:"vertical",style:{width:"500px"},onFinish:this.onSubmit},r.a.createElement(ne.a.Item,{label:"Email",name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your email!"}]},r.a.createElement(re.a,{prefix:r.a.createElement(fn.a,{className:"site-form-item-icon"})})),r.a.createElement(ne.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(re.a.Password,{prefix:r.a.createElement(hn.a,{className:"site-form-item-icon"})})),r.a.createElement(ne.a.Item,null,r.a.createElement(j.a,{loading:this.state.loading,type:"primary",htmlType:"submit"},"Log in")," ","Or ",r.a.createElement(I.b,{to:"/register"},"Register now!"))))}}]),a}(n.Component),On=Object(m.b)((function(e){return{auth:e.authReducer,errors:e.authReducer.errors}}),(function(e){return{loginUser:Object(f.bindActionCreators)(aa,e)}}))(yn),wn=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/home")}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement("div",{style:{marginTop:"40vh",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"}},r.a.createElement("p",null,"WELCOME"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(j.a,{type:"primary"},r.a.createElement(I.b,{to:"/login"},"LOGIN")),r.a.createElement(j.a,{style:{marginLeft:"8px"}},r.a.createElement(I.b,{to:"/register"},"REGISTER")))))}}]),a}(n.Component),kn=Object(m.b)((function(e){return{auth:e.authReducer}}))(wn),jn=function(){return r.a.createElement("div",{style:{height:"100vh",paddingTop:"40vh",fontSize:"30px",textAlign:"center"}},"Coming Soon!")},xn=a(299),Cn=(a(581),a(122));var Dn=function(e){var t=e.message,a=e.currentUser,n=e.you,o=t.sender,i=t.time,l=t.body,c=t.type;return r.a.createElement("div",{style:{width:"100%",paddingLeft:"10px"}},r.a.createElement(Ie.a,{author:o===(null===n||void 0===n?void 0:n._id)?n.name:a.name,avatar:r.a.createElement(O.a,{src:o===(null===n||void 0===n?void 0:n._id)?n.avatar:a.avatar,alt:o===(null===n||void 0===n?void 0:n._id)?n.name:a.name}),content:"image"===c?r.a.createElement(B.a,{width:200,src:l,alt:"image"}):r.a.createElement("p",null,l),datetime:r.a.createElement(Cn.a,{title:ae()().format("YYYY-MM-DD HH:mm:ss")},r.a.createElement("span",null,ae()(i).fromNow()))}))},Sn=b.a.Content,Tn=b.a.Sider,Rn=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={chatMessage:"",currentThread:{},currentUser:{},you:{},requiredUser:null,loading:!1},e.openNotificationWithIcon=function(e,t){cn.a[e]({message:t})},e.hanleSearchChange=function(t){e.setState({chatMessage:t.target.value})},e.renderCards=function(){return e.state.currentThread.messages&&e.state.currentThread.messages.map((function(t){return r.a.createElement(Dn,{key:t._id,message:t,currentUser:e.state.currentUser,you:e.state.you})}))},e.onDrop=function(t){console.log(t);var a=new FormData;a.append("file",t[0]),R.a.post("upload/messages",a,{header:{"content-type":"multipart/form-data"}}).then((function(t){if(t.data.success){var a,n=t.data.location,r=null===(a=e.state.currentThread)||void 0===a?void 0:a._id;r?e.props.sendMessage(r,n,"image"):e.openNotificationWithIcon("warning","Please select a user to send the message")}}))},e.submitChatMessage=function(t){var a;t.preventDefault();var n=e.state.chatMessage,r=null===(a=e.state.currentThread)||void 0===a?void 0:a._id;r?(e.props.sendMessage(r,n,"text"),e.setState({chatMessage:""})):e.openNotificationWithIcon("warning","Please select a user to send the message")},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(D.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),this.props.location.state&&this.setState({requiredUser:this.props.location.state.user}),e.next=4,this.props.getThreads();case 4:this.setState({loading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.messagesEnd&&this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"componentWillReceiveProps",value:function(e){var t,a=this,n=null===(t=this.state.currentThread)||void 0===t?void 0:t._id;if(n){var r=e.threads.find((function(e){return e._id==n}));r&&this.setState({currentThread:r})}else if(this.state.requiredUser){var o=e.threads.find((function(e){return!!(null===e||void 0===e?void 0:e.members.find((function(e){return e._id==a.state.requiredUser})))}));if(o){var i=o.members.find((function(e){return e._id!=a.props.user.userId})),l=o.members.find((function(e){return e._id==a.props.user.userId}));this.setState({currentThread:o,requiredUser:null,currentUser:i,you:l})}else this.props.startThread(this.state.requiredUser)}}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.loading?r.a.createElement(He,null):r.a.createElement(b.a,{style:{height:"100vh",paddingTop:"84px",margin:"auto"}},r.a.createElement(b.a,{style:{}},r.a.createElement(Tn,{width:300,className:"site-layout-background"},r.a.createElement(E.b,{style:{paddingLeft:"10px"},itemLayout:"horizontal",dataSource:this.props.threads,renderItem:function(t){var a=t.members.find((function(t){return t._id!=e.props.user.userId})),n=t.members.find((function(t){return t._id==e.props.user.userId}));return r.a.createElement(E.b.Item,{style:e.state.currentThread._id==t._id?{background:"#FFF",border:"1px solid #DDD",cursor:"pointer",padding:"4px 8px"}:{cursor:"pointer",padding:"4px 8px"},key:t._id,onClick:function(){return e.setState({currentThread:t,currentUser:a,you:n})}},r.a.createElement(E.b.Item.Meta,{avatar:r.a.createElement(O.a,{src:a.avatar}),title:a.name,description:t.messages.length?"text"==t.messages[t.messages.length-1].type?t.messages[t.messages.length-1].body:"Image":""}))}})),r.a.createElement(b.a,{style:{width:"60vw",padding:"0 24px 24px"}},r.a.createElement(Sn,{style:{margin:0}},r.a.createElement("div",{class:"site-layout-background",style:{paddingLeft:"0px",maxWidth:"860px"}},r.a.createElement("div",{className:"infinite-container",style:{height:"570px",overflowY:"scroll"}},this.state.currentThread&&this.renderCards(),r.a.createElement("div",{ref:function(t){e.messagesEnd=t},style:{float:"left",clear:"both",paddingLeft:"30px"}})),r.a.createElement(la.a,{gutter:12},r.a.createElement(ne.a,{style:{width:"100%",marginTop:"10px",marginBottom:"12px",marginLeft:"10px"},layout:"inline",onSubmit:this.submitChatMessage},r.a.createElement(ca.a,{span:18},r.a.createElement(re.a,{id:"message",prefix:r.a.createElement(nt.a,null),placeholder:"Let's start talking",type:"text",value:this.state.chatMessage,onChange:this.hanleSearchChange})),r.a.createElement(ca.a,{span:2},r.a.createElement(xn.a,{onDrop:this.onDrop},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("section",null,r.a.createElement("div",t(),r.a.createElement("input",a()),r.a.createElement(j.a,{style:{width:"100%"}},r.a.createElement(Ha.a,null))))}))),r.a.createElement(ca.a,{span:3},r.a.createElement(j.a,{type:"primary",style:{width:"100%"},onClick:this.submitChatMessage,htmlType:"submit"},r.a.createElement(Pa.a,null)))))))))))}}]),a}(n.Component),An=Object(m.b)((function(e){return{threads:e.messageReducer.threads,user:e.authReducer.user}}),(function(e){return{getThreads:Object(f.bindActionCreators)(ht,e),startThread:Object(f.bindActionCreators)(vt,e),sendMessage:Object(f.bindActionCreators)(bt,e),updateThread:Object(f.bindActionCreators)(gt,e)}}))(Rn);if(localStorage.jwtToken){var In=localStorage.jwtToken;ot(In);var Pn=Object(it.a)(In);Qt.dispatch(na(Pn)),console.log("the main guyYYY");var Ln=Date.now()/1e3;Pn.exp<Ln&&(Qt.dispatch(ra()),window.location.href="./login"),ea()}var Nn=Object(m.b)((function(e){return{errors:e.authReducer.errors}}),(function(e){return{clearErrors:Object(f.bindActionCreators)(oa,e)}}))((function(e){var t=r.a.useState(),a=Object(l.a)(t,2),o=a[0],i=a[1],s=Object(sn.useThemeSwitcher)(),u=s.switcher,p=s.status,d=s.themes;return Object(n.useEffect)((function(){var t,a,n;(null===(t=e.errors)||void 0===t?void 0:t.message)&&(a="error",n=e.errors.message,cn.a[a]({message:n}),e.clearErrors())}),[e.errors]),"loading"===p?null:r.a.createElement(b.a,null,r.a.createElement(Da,null),r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/",component:kn}),r.a.createElement(c.b,{exact:!0,path:"/register",component:En}),r.a.createElement(c.b,{exact:!0,path:"/login",component:On}),r.a.createElement(c.d,null,r.a.createElement(dn,{exact:!0,path:"/home",component:$e}),r.a.createElement(dn,{exact:!0,path:"/i/profile/:id",component:Ka,my:!0}),r.a.createElement(dn,{exact:!0,path:"/profile/:id",component:Ka}),r.a.createElement(dn,{exact:!0,path:"/discover",component:ln}),r.a.createElement(dn,{exact:!0,path:"/messages",component:An}),r.a.createElement(c.b,{path:"/",component:jn}))),r.a.createElement(j.a,{shape:"circle",size:"large",icon:r.a.createElement(un.a,{style:o?{color:"#F0C315"}:{color:"#444"}}),style:{position:"fixed",right:"16px",bottom:"16px"},onClick:function(){return i(e=!o),void u({theme:e?d.dark:d.light});var e}}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _n=a(296),Mn={dark:"".concat("","/dark-theme.css"),light:"".concat("","/light-theme.css")};i.a.render(r.a.createElement(m.a,{store:Qt},r.a.createElement(I.a,null,r.a.createElement(_n.a,{persistor:Zt},r.a.createElement(sn.ThemeSwitcherProvider,{themeMap:Mn,defaultTheme:"light"},r.a.createElement(Nn,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[305,1,2]]]);
//# sourceMappingURL=main.93dcdfa0.chunk.js.map